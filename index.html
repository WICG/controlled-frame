<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Controlled Frame API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version ac5ea272d, updated Fri Dec 6 15:45:15 2024 -0800" name="generator">
  <link href="TBD" rel="canonical">
  <meta content="c10e65032e9dd91300392527185f0a87abdaea6c" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
.domintro::before {
    content: 'For web developers (non-normative)';
    text-transform: initial;
}
.domintro dt {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;

    padding-top: 0.5em;
    padding-bottom: 1em;
}
.domintro dt a {
    color: inherit; border-bottom-style: none;
}
.domintro dt code {
    font-size: inherit;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Controlled Frame API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2025-01-08">8 January 2025</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="TBD">TBD</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/chasephillips/controlled-frame/issues/">GitHub</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="115880"><a class="p-name fn u-email email" href="mailto:cmp@google.com">Chase Phillips</a> (<a class="p-org org" href="https://google.com">Google LLC</a>)
     <dd class="editor p-author h-card vcard" data-editor-id="139758"><a class="p-name fn u-email email" href="mailto:rmcelrath@chromium.org">Robbie McElrath</a> (<a class="p-org org" href="https://google.com">Google LLC</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 the Contributors to the Controlled Frame API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document defines an API for embedding arbitrary web content only
within the context of an Isolated Web Application (IWA). The embedded
content is a new top-level browsing context within and controlled by the
embedder.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#usage-overview"><span class="secno">2</span> <span class="content">Usage Overview</span></a>
    <li>
     <a href="#motivating-applications"><span class="secno">3</span> <span class="content">Motivating Applications</span></a>
     <ol class="toc">
      <li><a href="#browser-content-redirection"><span class="secno">3.1</span> <span class="content">Latency-sensitive applications in virtualized sessions</span></a>
      <li><a href="#no-embedding-prohibitions"><span class="secno">3.2</span> <span class="content">Embedding third party web content without restriction</span></a>
      <li><a href="#remote-content-control"><span class="secno">3.3</span> <span class="content">Remote display and manipulation of web content</span></a>
      <li><a href="#clearing-session-data"><span class="secno">3.4</span> <span class="content">Clearing user content after each session</span></a>
      <li><a href="#monitor-idle-sessions"><span class="secno">3.5</span> <span class="content">Monitor for idle sessions</span></a>
      <li><a href="#blocking-navigations"><span class="secno">3.6</span> <span class="content">Arbitrarily blocking navigations</span></a>
     </ol>
    <li>
     <a href="#considerations"><span class="secno">4</span> <span class="content">Security, Privacy, and Accessibility Considerations</span></a>
     <ol class="toc">
      <li><a href="#security"><span class="secno">4.1</span> <span class="content">Security</span></a>
      <li><a href="#privacy"><span class="secno">4.2</span> <span class="content">Privacy</span></a>
      <li><a href="#accessibility"><span class="secno">4.3</span> <span class="content">Accessibility</span></a>
     </ol>
    <li><a href="#concepts"><span class="secno">5</span> <span class="content">Concepts</span></a>
    <li>
     <a href="#api"><span class="secno">6</span> <span class="content">API</span></a>
     <ol class="toc">
      <li><a href="#html-element"><span class="secno">6.1</span> <span class="content">Controlled Frame HTML Element</span></a>
      <li><a href="#api-nav"><span class="secno">6.2</span> <span class="content">Navigation methods</span></a>
      <li><a href="#api-scripting"><span class="secno">6.3</span> <span class="content">Scripting methods</span></a>
      <li><a href="#api-config"><span class="secno">6.4</span> <span class="content">Configuration methods</span></a>
      <li><a href="#api-capture"><span class="secno">6.5</span> <span class="content">Capture methods</span></a>
      <li><a href="#api-event"><span class="secno">6.6</span> <span class="content">Event listener API</span></a>
     </ol>
    <li><a href="#controlled-frame-api"><span class="secno">7</span> <span class="content">Controlled Frame API</span></a>
    <li><a href="#acknowledgements"><span class="secno">8</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
   <p>This specification describes a content embedding API that satisfies some
critical use cases for IWAs that <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code> does not support. This embedding
environment should allow embedding all content without express permission from
the embedded site, including content which <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code> cannot embed, and provide
embedding sites more control over that embedded content.</p>
   <p>Since this is a particularly powerful API, its use and availability makes an app
a target of various types of hacking. As a result, this API is limited to use in <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">Isolated Web Applications</a> (IWAs) which have addtional
safeguards in place to protect users and developers.  IWAs are not a normal web
application and can exist only at a special 'isolated-app:' scheme. This means
by design that this API will not be available to normal web pages.</p>
   <p class="note" role="note"><span class="marker">Note:</span> This API is not intended to be a replacement or substitute for <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element②">iframe</a></code>.
All <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element③">iframe</a></code> use cases are still valid and should continue to use <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element④">iframe</a></code>,
including IWAs where possible.</p>
   <h2 class="heading settled" data-level="2" id="usage-overview"><span class="secno">2. </span><span class="content">Usage Overview</span><a class="self-link" href="#usage-overview"></a></h2>
   <p>Lorem ipsum. Insert basic info and example here.</p>
   <h2 class="heading settled" data-level="3" id="motivating-applications"><span class="secno">3. </span><span class="content">Motivating Applications</span><a class="self-link" href="#motivating-applications"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <h3 class="heading settled" data-level="3.1" id="browser-content-redirection"><span class="secno">3.1. </span><span class="content">Latency-sensitive applications in virtualized sessions</span><a class="self-link" href="#browser-content-redirection"></a></h3>
   <p>In virtualized environments, users typically have a local thin client that
renders a full virtual desktop. The actual desktop execution environment will be
running on a remote virtualization server. If the user’s browser navigates to a
latency-sensitive application (such as a video app), the rendered content will
have additional latency ("lag") that makes the experience difficult or
impossible for the user. This also applies for applications that record the
user, such as video conferencing applications. In these latency-sensitive
applications, the virtual desktop application can render the latency-sensitive
content locally and overlay it on top of the rendered remote content to reduce
this latency. This use case is also known as "browser content redirection."</p>
   <h3 class="heading settled" data-level="3.2" id="no-embedding-prohibitions"><span class="secno">3.2. </span><span class="content">Embedding third party web content without restriction</span><a class="self-link" href="#no-embedding-prohibitions"></a></h3>
   <p>In a kiosk environment, applications must load content from third parties and
display that content on screens within their applications. A teacher may trigger
the navigation event, or it may be configured by an administrator such as a
shopping mall manager. The content may prohibit embedding by <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑤">iframe</a></code> through
the use of X-Frame-Options and CSP. An controlled frame, however, should be able
to load all content, even content that prohibits embedding by <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element⑥">iframe</a></code>.</p>
   <h3 class="heading settled" data-level="3.3" id="remote-content-control"><span class="secno">3.3. </span><span class="content">Remote display and manipulation of web content</span><a class="self-link" href="#remote-content-control"></a></h3>
   <p>In a kiosk environment, applications must ensure that content continues to
display on screens and may need to interrupt content with their own supplied
behaviors. This behavior should work without local attendance by an
administrator, and ideally can be managed remotely over the network. If content
were to crash, for example, these applications should observe and respond to the
crash by reloading the content in a fresh embedded view.</p>
   <h3 class="heading settled" data-level="3.4" id="clearing-session-data"><span class="secno">3.4. </span><span class="content">Clearing user content after each session</span><a class="self-link" href="#clearing-session-data"></a></h3>
   <p>In some environments, someone only uses a single device for a brief time to
complete their task, like ordering in a restaurant. When their task is complete,
the embedder application should be able to clear all of the local user data
associated with the task and then restart the embedded instance.</p>
   <h3 class="heading settled" data-level="3.5" id="monitor-idle-sessions"><span class="secno">3.5. </span><span class="content">Monitor for idle sessions</span><a class="self-link" href="#monitor-idle-sessions"></a></h3>
   <p>While users interact with embedded content, the user may not explicitly end
their session. This content may assume the user is present when they have
actually finished or departed without completing the task. Embedder applications
want to detect when users idle over their case’s threshold and begin a fresh
session.</p>
   <h3 class="heading settled" data-level="3.6" id="blocking-navigations"><span class="secno">3.6. </span><span class="content">Arbitrarily blocking navigations</span><a class="self-link" href="#blocking-navigations"></a></h3>
   <p>While displaying embedded web content that’s not authored by the embedder, pages
may link to third party web content that’s disallowed. Allowing the embedder to
edit elements in embedded content through arbitrary script injection into the
web content can ensure navigation cannot occur to blocked pages. The embedder
can also use the Controlled Frame API to capture navigation events and ensure
that only pages to approved sites can be loaded within that controlled frame.</p>
   <h2 class="heading settled" data-level="4" id="considerations"><span class="secno">4. </span><span class="content">Security, Privacy, and Accessibility Considerations</span><a class="self-link" href="#considerations"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <h3 class="heading settled" data-level="4.1" id="security"><span class="secno">4.1. </span><span class="content">Security</span><a class="self-link" href="#security"></a></h3>
   <p><b>Controlled Frame is based upon <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">[Isolated-Web-Apps]</a> (IWA)
and integrates with core security specs</b></p>
   <p>Since Controlled Frame is a particularly powerful API, using it or even having
it available makes an app a target of various types of hacking. As a result,
this API is limited to use in <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> which have additional
safeguards in place to protect application developers and users. The Isolated
Web App explainer has this to say:</p>
   <blockquote>
    <p><i>"A user agent may also force an application to adopt this threat model if
the developer needs access to APIs which would make the application an appealing
target for XSS or server-side attacks."</i></p>
   </blockquote>
   <p>Controlled Frame makes just such an appealing target, and to expose this with
caution we’re opting into <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> to guard against certain
attacks. Generally, <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> provide strong security
assurances that each of the resources in an application are secure both at rest
and in-transit. You can read more about <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> security and
permissions in the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> explainer and the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> <a data-link-type="biblio" href="#biblio-high-watermark-permissions" title="Isolated Web Apps High Watermark Permissions Explainer">[High-Watermark-Permissions]</a> explainer.</p>
   <p>Controlled Frame integrates with <a data-link-type="biblio" href="#biblio-permissions-policy" title="Permissions Policy">[Permissions-Policy]</a> and <a data-link-type="biblio" href="#biblio-permissions" title="Permissions">[Permissions]</a>.
You can read more about <a href="https://w3c.github.io/webappsec-permissions-policy/#privacy"><cite>Permissions Policy</cite> §  12. Privacy and Security</a> and <a href="https://w3c.github.io/permissions/#security-considerations"><cite>Permissions</cite> § E Security considerations</a> (note the entry is currently sparse).</p>
   <p><b>Attacking web sites could display content that doesn’t otherwise allow itself
to be embedded and trick users on non-<a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a>.</b></p>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p>Controlled Frame will only be available within <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a></p>
   </ul>
   <p><b>An <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> may embed another <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> (or
itself) via Controlled Frame to manipulate our <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> policies somehow (e.g. an Controlled Frame embedded <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> may detect it’s being embedded due to the absence of the "controlledframe"
policy-controlled feature).</b></p>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p>Controlled Frame can only point to "https" schemes, excluding the
"isolated-app" scheme used for <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a></p>
   </ul>
   <p><b>Controlled Frame could gain access to the powerful &lt;controlledframe>
element.</b></p>
   <p>An <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> that’s not expected to use Controlled Frame may
attempt to embed content.</p>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p>Only embedder applications and their same-origin <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> child navigables that have been granted the "controlledframe"
policy-controlled feature will be allowed access to the Controlled Frame
element.</p>
    <li data-md>
     <p>Same-origin child navigables without the "controlledframe"
policy-controlled feature will not be allowed to use a Controlled Frame
element (to be confirmed, see note below)</p>
    <li data-md>
     <p>Cross-origin iframes to <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> can use the "allow"
attribute to disable Controlled Frame</p>
    <li data-md>
     <p>Cross-origin iframes to non-<a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> will not have
access to the "controlledframe" policy-controlled feature, and so will not
be allowed to use a Controlled Frame element</p>
    <li data-md>
     <p>See the "Embedder Policies Using the "controlledframe" Feature" section
above for more details</p>
   </ul>
   <p><b>An IWA may attempt to embed content from non-https schemes, such as 'http:'
or 'isolated-app:'</b></p>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p>Controlled Frame will only work when the navigable’s "src" URL has an
'https:' scheme</p>
   </ul>
   <p><b>Malicious Controlled Frame could access the embedder’s running process (eg.
Spectre attack)</b></p>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p>Controlled Frame will be executed in a separate process from the
embedder’s process</p>
   </ul>
   <p><b>Controlled Frame for a given "https origin" could interact or interfere with
the user’s own storage user agent data for that https origin</b></p>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p>Controlled Frame will always store data in a separate storage user agent
that’s apart from the default storage user agent</p>
    <li data-md>
     <p>Data written to by a given "https origin" while the user accesses that
origin via an <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> Controlled Frame will be isolated
from the user’s storage user agent that backs "normal" window and tab usage,
and vice versa</p>
   </ul>
   <p><b>Malicious Controlled Frame could overwrite embedder’s stored data</b></p>
   <ul>
    <li data-md>
     <p>The embedder and embedded storage user agent could overlap, and possibly
multiple same-site <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> child navigables could be
affected by activity in the Controlled Frame</p>
    <li data-md>
     <p>if storage user agents were shared between the embedder and embedded
sites, clearing data for either one could negatively impact the other</p>
   </ul>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> and Controlled Frame will always have separate
storage user agents</p>
    <li data-md>
     <p>A Controlled Frame should not have read or write access to other storage
user agents besides its own</p>
   </ul>
   <p><b>Malicious Controlled Frame may detect it is embedded and attempt to attack
the embedder application</b></p>
   <p>Planned mitigation:</p>
   <ul>
    <li data-md>
     <p>The user agent will match the browser.</p>
    <li data-md>
     <p>The Controlled Frame storage user agent will be separate from the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> and the default storage user agents.</p>
    <li data-md>
     <p>The Controlled Frame process will be separate from the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> and the default renderer and browser processes.</p>
    <li data-md>
     <p>The Controlled Frame environment will appear to be the top-most navigable:</p>
     <ul>
      <li data-md>
       <p>window should match window.parent and window.top</p>
      <li data-md>
       <p>List of policy-controlled features and their disable/enable status
should match the default for a navigable</p>
     </ul>
   </ul>
   <p>Ideas:</p>
   <ul>
    <li data-md>
     <p>Investigate for potential interactions around filesystem, quota storage,
and localStorage APIs</p>
   </ul>
   <p><b>User may not be able to verify the origin of the page being viewed in the
Controlled Frame</b></p>
   <p>Ideas:</p>
   <ul>
    <li data-md>
     <p>Expose the origin to the user somehow, such as adding UI at the top of a
Controlled Frame that displays the origin?</p>
    <li data-md>
     <p>Have the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> specify in the manifest the origins that
they expect to access?</p>
   </ul>
   <p><b>Controlled Frame may exploit vulnerabilities in out-of-date browser
engine</b></p>
   <p>Already addressed with:</p>
   <ul>
    <li data-md>
     <p>Existing browser engine auto-update mechanisms</p>
   </ul>
   <h3 class="heading settled" data-level="4.2" id="privacy"><span class="secno">4.2. </span><span class="content">Privacy</span><a class="self-link" href="#privacy"></a></h3>
   <p>Controlled Frame integrates with Permissions Policy and Permissions. You can
read more about <a href="https://w3c.github.io/webappsec-permissions-policy/#privacy"><cite>Permissions Policy</cite> §  12. Privacy and Security</a>.  You can read more about <a href="https://w3c.github.io/permissions/#security-considerations"><cite>Permissions</cite> § E Security considerations</a>.</p>
   <p>For Controlled Frame specifically, we’ve identified the following privacy
considerations:</p>
   <ul>
    <li data-md>
     <p>Users' browsing within Controlled Frame will be visible to the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a></p>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> can access and exfiltrate the Controlled Frame’s
session cookies (this only applies to the Controlled Frame’s session since
they use a separate storage partition from the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> and
the third party origin when browsed in a tab)</p>
    <li data-md>
     <p>User activity in Controlled Frame can be observed by the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> (e.g. keyboard events can be monitored, password
entry can be sniffed)</p>
    <li data-md>
     <p>User file upload to Controlled Frame can be hijacked</p>
    <li data-md>
     <p>User data held in the Controlled Frame’s remote server could be accessed by
code implanted by the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a></p>
    <li data-md>
     <p>Users that wish to clear their session history must also do so via the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a>, which will then need to clear the associated
storage user agents</p>
     <ul>
      <li data-md>
       <p>This would be necessary since embedded storage user agents are separate
from the non-embedded storage user agents for any given https origin</p>
     </ul>
    <li data-md>
     <p>We plan to investigate browser UX to allow users to clear the Controlled
Frame storage user agents, the following cases will be considered:</p>
     <ul>
      <li data-md>
       <p>If a user wants to clear site data for an <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a>, the
associated embedded storage user agents will also be cleared</p>
       <ul>
        <li data-md>
         <p>This is because if the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a>'s data is cleared,
the app will no longer have any context for the associated embedded
storage user agents and therefore will no longer be used or useful
to the user or organization</p>
        <li data-md>
         <p>As a result, we expect that clearing an <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a>'s
site data will require clearing all of the associated embedded
storage user agents</p>
       </ul>
      <li data-md>
       <p>A user may want to clear all site data for a given "https origin", even
if that origin is stored within an <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a>'s embedded
storage user agent</p>
       <ul>
        <li data-md>
         <p>We may choose to provide the ability to clear all <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> site data for that "https origin" even if
that site data is held within an embedded storage user agent</p>
        <li data-md>
         <p>If we chose to clear the "https origin" data, <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> would need to prepare for the possibility
that embedded storage user agents may be removed outside of their
control, and this may be disruptive to the <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> and introduce complexity of implementation</p>
        <li data-md>
         <p>Supporting this in the browser user agent exposes browser vendors,
developers, and users to additional complexity, so we may choose not
to support this approach and instead leave this up to <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> developers to implement</p>
        <li data-md>
         <p>As a counter example to supporting clearing a single given "https
origin"'s embedded storage user agent, consider that to our
knowledge no operating system behaves that way</p>
         <ul>
          <li data-md>
           <p>i.e. there’s no central "clear browsing data" option which clears
storage for all installed browser engines, each application’s
storage is treated as its own to manage</p>
         </ul>
       </ul>
      <li data-md>
       <p>User wants to clear the site data for a given <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a>'s
Controlled Frame-embedded storage user agent for a given "https origin"</p>
      <li data-md>
       <p>User wants to clear the site data for a given <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a>'s
Controlled Frame-embedded storage user agents for all "https origins"</p>
     </ul>
    <li data-md>
     <p>An <a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWA</a> will need the ability to clear the storage user
agent’s Controlled Frame-embedded storage user agent for a given "https
origin"</p>
   </ul>
   <h3 class="heading settled" data-level="4.3" id="accessibility"><span class="secno">4.3. </span><span class="content">Accessibility</span><a class="self-link" href="#accessibility"></a></h3>
   <p>For Controlled Frame, we’ve identified the following accessibility
considerations:</p>
   <ul>
    <li data-md>
     <p>Browser user agents' accessibility tools and APIs should have visibility into
Controlled Frame</p>
    <li data-md>
     <p><a data-link-type="biblio" href="#biblio-isolated-web-apps" title="Isolated Web Apps Explainer">IWAs</a> should expect to provide their own accessibility
tools for Controlled Frame content in order to properly integrate
accessibility features for some use cases (such as "browser content
redirection")</p>
   </ul>
   <h2 class="heading settled" data-level="5" id="concepts"><span class="secno">5. </span><span class="content">Concepts</span><a class="self-link" href="#concepts"></a></h2>
   <h2 class="heading settled" data-level="6" id="api"><span class="secno">6. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="6.1" id="html-element"><span class="secno">6.1. </span><span class="content">Controlled Frame HTML Element</span><a class="self-link" href="#html-element"></a></h3>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="controlledframe"><code><c- g>ControlledFrame</c-></code></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement" id="ref-for-htmlelement"><c- n>HTMLElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor" id="ref-for-htmlconstructor"><c- g>HTMLConstructor</c-></a>] <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="constructor" data-export data-lt="ControlledFrame()|constructor()" id="dom-controlledframe-controlledframe"><code><c- g>constructor</c-></code></dfn>();

    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="USVString" id="dom-controlledframe-src"><code><c- g>src</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions①"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="DOMString" id="dom-controlledframe-name"><code><c- g>name</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions②"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="boolean" id="dom-controlledframe-allowfullscreen"><code><c- g>allowfullscreen</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions③"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="boolean" id="dom-controlledframe-allowscaling"><code><c- g>allowscaling</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions④"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="boolean" id="dom-controlledframe-allowtransparency"><code><c- g>allowtransparency</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions⑤"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="boolean" id="dom-controlledframe-autosize"><code><c- g>autosize</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions⑥"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="DOMString" id="dom-controlledframe-maxheight"><code><c- g>maxheight</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions⑦"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="DOMString" id="dom-controlledframe-maxwidth"><code><c- g>maxwidth</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions⑧"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="DOMString" id="dom-controlledframe-minheight"><code><c- g>minheight</c-></code></dfn>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions⑨"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="DOMString" id="dom-controlledframe-minwidth"><code><c- g>minwidth</c-></code></dfn>;
    <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-type="DOMString" id="dom-controlledframe-partition"><code><c- g>partition</c-></code></dfn>;

    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy" id="ref-for-windowproxy"><c- n>WindowProxy</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-readonly data-type="WindowProxy?" id="dom-controlledframe-contentwindow"><code><c- g>contentWindow</c-></code></dfn>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#contextmenus" id="ref-for-contextmenus"><c- n>ContextMenus</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="attribute" data-export data-readonly data-type="ContextMenus" id="dom-controlledframe-contextmenus"><code><c- g>contextMenus</c-></code></dfn>;

    // Navigation methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="back()" id="dom-controlledframe-back"><code><c- g>back</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="canGoBack()" id="dom-controlledframe-cangoback"><code><c- g>canGoBack</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="canGoForward()" id="dom-controlledframe-cangoforward"><code><c- g>canGoForward</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="forward()" id="dom-controlledframe-forward"><code><c- g>forward</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined②"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="go(relativeIndex)" id="dom-controlledframe-go"><code><c- g>go</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long"><c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/go(relativeIndex)" data-dfn-type="argument" data-export id="dom-controlledframe-go-relativeindex-relativeindex"><code><c- g>relativeIndex</c-></code></dfn>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined③"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="reload()" id="dom-controlledframe-reload"><code><c- g>reload</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined④"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="stop()" id="dom-controlledframe-stop"><code><c- g>stop</c-></code></dfn>();

    // Scripting methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑤"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="addContentScripts(contentScriptList)" id="dom-controlledframe-addcontentscripts"><code><c- g>addContentScripts</c-></code></dfn>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-contentscriptdetails" id="ref-for-dictdef-contentscriptdetails"><c- n>ContentScriptDetails</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/addContentScripts(contentScriptList)" data-dfn-type="argument" data-export id="dom-controlledframe-addcontentscripts-contentscriptlist-contentscriptlist"><code><c- g>contentScriptList</c-></code></dfn>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="executeScript(details)|executeScript()" id="dom-controlledframe-executescript"><code><c- g>executeScript</c-></code></dfn>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-injectdetails" id="ref-for-dictdef-injectdetails"><c- n>InjectDetails</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/executeScript(details), ControlledFrame/executeScript()" data-dfn-type="argument" data-export id="dom-controlledframe-executescript-details-details"><code><c- g>details</c-></code></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise④"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑥"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="insertCSS(details)|insertCSS()" id="dom-controlledframe-insertcss"><code><c- g>insertCSS</c-></code></dfn>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-injectdetails" id="ref-for-dictdef-injectdetails①"><c- n>InjectDetails</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/insertCSS(details), ControlledFrame/insertCSS()" data-dfn-type="argument" data-export id="dom-controlledframe-insertcss-details-details"><code><c- g>details</c-></code></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑦"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="removeContentScripts(scriptNameList)" id="dom-controlledframe-removecontentscripts"><code><c- g>removeContentScripts</c-></code></dfn>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a>>? <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/removeContentScripts(scriptNameList)" data-dfn-type="argument" data-export id="dom-controlledframe-removecontentscripts-scriptnamelist-scriptnamelist"><code><c- g>scriptNameList</c-></code></dfn>);

    // Configuration methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑤"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑧"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="clearData(options, types)|clearData(options)|clearData()" id="dom-controlledframe-cleardata"><code><c- g>clearData</c-></code></dfn>(
      <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-cleardataoptions" id="ref-for-dictdef-cleardataoptions"><c- n>ClearDataOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/clearData(options, types), ControlledFrame/clearData(options), ControlledFrame/clearData()" data-dfn-type="argument" data-export id="dom-controlledframe-cleardata-options-types-options"><code><c- g>options</c-></code></dfn> = {},
      <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-cleardatatypeset" id="ref-for-dictdef-cleardatatypeset"><c- n>ClearDataTypeSet</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/clearData(options, types), ControlledFrame/clearData(options), ControlledFrame/clearData()" data-dfn-type="argument" data-export id="dom-controlledframe-cleardata-options-types-types"><code><c- g>types</c-></code></dfn> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑥"><c- b>boolean</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="getAudioState()" id="dom-controlledframe-getaudiostate"><code><c- g>getAudioState</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long①"><c- b>long</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="getZoom()" id="dom-controlledframe-getzoom"><code><c- g>getZoom</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑧"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑦"><c- b>boolean</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="isAudioMuted()" id="dom-controlledframe-isaudiomuted"><code><c- g>isAudioMuted</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined⑨"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="setAudioMuted(mute)" id="dom-controlledframe-setaudiomuted"><code><c- g>setAudioMuted</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑧"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/setAudioMuted(mute)" data-dfn-type="argument" data-export id="dom-controlledframe-setaudiomuted-mute-mute"><code><c- g>mute</c-></code></dfn>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑨"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①⓪"><c- b>undefined</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="setZoom(zoomFactor)" id="dom-controlledframe-setzoom"><code><c- g>setZoom</c-></code></dfn>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long②"><c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame/setZoom(zoomFactor)" data-dfn-type="argument" data-export id="dom-controlledframe-setzoom-zoomfactor-zoomfactor"><code><c- g>zoomFactor</c-></code></dfn>);

    // Capture methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①①"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="captureVisibleRegion()" id="dom-controlledframe-capturevisibleregion"><code><c- g>captureVisibleRegion</c-></code></dfn>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①②"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ControlledFrame" data-dfn-type="method" data-export data-lt="print()" id="dom-controlledframe-print"><code><c- g>print</c-></code></dfn>();
};
</pre>
   <p>If the "controlled-frame" feature is enabled for an IWA in its manifest, each
IWA frame will have access to a ControlledFrame element.</p>
   <h3 class="heading settled" data-level="6.2" id="api-nav"><span class="secno">6.2. </span><span class="content">Navigation methods</span><a class="self-link" href="#api-nav"></a></h3>
   <div class="domintro note" role="note">
    <dl>
     <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-controlledframe-go" id="ref-for-dom-controlledframe-go">go</a></code>()
     <dd data-md>
      <p>Reloads the current page.</p>
     <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-controlledframe-go" id="ref-for-dom-controlledframe-go①">go</a></code>(<var>relativeIndex</var>)
     <dd data-md>
      <p>Goes back or forward <var>relativeIndex</var> number of steps in the overall <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#tn-session-history-entries"> session history entries </a> list for the current <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable"> traversable navigable</a>.</p>
      <p>A zero relative index will reload the current page.</p>
      <p>If the relative index is out of range, does nothing.</p>
     <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-controlledframe-back" id="ref-for-dom-controlledframe-back">back</a></code>()
     <dd data-md>
      <p>Goes back one step in the overall <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#tn-session-history-entries"> session history entries </a> list for the <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable"> traversable navigable</a> in the Controlled Frame.</p>
      <p>If there is no previous page, does nothing.</p>
     <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-controlledframe-forward" id="ref-for-dom-controlledframe-forward">forward</a></code>()
     <dd data-md>
      <p>Goes forward one step in the overall <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#tn-session-history-entries"> session history entries </a> list for the <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable"> traversable navigable</a> in the Controlled Frame.</p>
      <p>If there is no next page, does nothing.</p>
     <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-controlledframe-cangoback" id="ref-for-dom-controlledframe-cangoback">canGoBack</a></code>()
     <dd data-md>
      <p>Returns true if the current <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-current-history-entry"> current session history entry</a> is not the first one in the navigation
 history entry list. This means that there is a previous <a href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#session-history-entry"> session history entry</a> for this <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable"> navigable</a>.</p>
     <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-controlledframe-reload" id="ref-for-dom-controlledframe-reload">reload</a></code>()
     <dd data-md>
      <p>Reloads the current page.</p>
     <dt data-md><code class="idl"><a data-link-type="idl" href="#dom-controlledframe-stop" id="ref-for-dom-controlledframe-stop">stop</a></code>()
     <dd data-md>
      <p>Cancels the document load.</p>
    </dl>
   </div>
   <h3 class="heading settled" data-level="6.3" id="api-scripting"><span class="secno">6.3. </span><span class="content">Scripting methods</span><a class="self-link" href="#api-scripting"></a></h3>
<pre class="idl highlight def">// One of |code| or |file| must be specified but not both.
<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-injectdetails"><code><c- g>InjectDetails</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="InjectDetails" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-injectdetails-code"><code><c- g>code</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑧"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="InjectDetails" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-injectdetails-file"><code><c- g>file</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-injectionitems"><code><c- g>InjectionItems</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑨"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="InjectionItems" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-injectionitems-code"><code><c- g>code</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⓪"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="InjectionItems" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-injectionitems-files"><code><c- g>files</c-></code></dfn>;
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-runat"><code><c- g>RunAt</c-></code></dfn> {
  <dfn class="dfn-paneled idl-code" data-dfn-for="RunAt" data-dfn-type="enum-value" data-export id="dom-runat-document_start"><code><c- s>"document_start"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="RunAt" data-dfn-type="enum-value" data-export id="dom-runat-document_end"><code><c- s>"document_end"</c-></code></dfn>,
  <dfn class="dfn-paneled idl-code" data-dfn-for="RunAt" data-dfn-type="enum-value" data-export id="dom-runat-document_idle"><code><c- s>"document_idle"</c-></code></dfn>,
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-contentscriptdetails"><code><c- g>ContentScriptDetails</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑨"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-contentscriptdetails-all_frames"><code><c- g>all_frames</c-></code></dfn>;
  <a data-link-type="idl-name" href="#dictdef-injectionitems" id="ref-for-dictdef-injectionitems"><c- n>InjectionItems</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="InjectionItems" id="dom-contentscriptdetails-css"><code><c- g>css</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①①"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-contentscriptdetails-exclude_globs"><code><c- g>exclude_globs</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①②"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-contentscriptdetails-exclude_matches"><code><c- g>exclude_matches</c-></code></dfn>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑤"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①③"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-contentscriptdetails-include_globs"><code><c- g>include_globs</c-></code></dfn>;
  <a data-link-type="idl-name" href="#dictdef-injectionitems" id="ref-for-dictdef-injectionitems①"><c- n>InjectionItems</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="InjectionItems" id="dom-contentscriptdetails-js"><code><c- g>js</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①⓪"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-contentscriptdetails-match_about_blank"><code><c- g>match_about_blank</c-></code></dfn>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑥"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①④"><c- b>DOMString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="sequence<DOMString>" id="dom-contentscriptdetails-matches"><code><c- g>matches</c-></code></dfn>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-contentscriptdetails-name"><code><c- g>name</c-></code></dfn>;
  <a data-link-type="idl-name" href="#enumdef-runat" id="ref-for-enumdef-runat"><c- n>RunAt</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContentScriptDetails" data-dfn-type="dict-member" data-export data-type="RunAt" id="dom-contentscriptdetails-run_at"><code><c- g>run_at</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="6.4" id="api-config"><span class="secno">6.4. </span><span class="content">Configuration methods</span><a class="self-link" href="#api-config"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-cleardataoptions"><code><c- g>ClearDataOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long③"><c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataOptions" data-dfn-type="dict-member" data-export data-type="long" id="dom-cleardataoptions-since"><code><c- g>since</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-cleardatatypeset"><code><c- g>ClearDataTypeSet</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-appcache"><code><c- g>appcache</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-cache"><code><c- g>cache</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-cookies"><code><c- g>cookies</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-filesystems"><code><c- g>fileSystems</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①⑤"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-indexeddb"><code><c- g>indexedDB</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①⑥"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-localstorage"><code><c- g>localStorage</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①⑦"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-persistentcookies"><code><c- g>persistentCookies</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①⑧"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-sessioncookies"><code><c- g>sessionCookies</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①⑨"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ClearDataTypeSet" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-cleardatatypeset-websql"><code><c- g>webSQL</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="6.5" id="api-capture"><span class="secno">6.5. </span><span class="content">Capture methods</span><a class="self-link" href="#api-capture"></a></h3>
   <h3 class="heading settled" data-level="6.6" id="api-event"><span class="secno">6.6. </span><span class="content">Event listener API</span><a class="self-link" href="#api-event"></a></h3>
   <h2 class="heading settled" data-level="7" id="controlled-frame-api"><span class="secno">7. </span><span class="content">Controlled Frame API</span><a class="self-link" href="#controlled-frame-api"></a></h2>
<pre class="idl highlight def"><c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-contexttype"><code><c- g>ContextType</c-></code></dfn> {
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-all"><code><c- s>"all"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-page"><code><c- s>"page"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-frame"><code><c- s>"frame"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-selection"><code><c- s>"selection"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-link"><code><c- s>"link"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-editable"><code><c- s>"editable"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-image"><code><c- s>"image"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-video"><code><c- s>"video"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ContextType" data-dfn-type="enum-value" data-export id="dom-contexttype-audio"><code><c- s>"audio"</c-></code></dfn>,
};

<c- b>enum</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="enum" data-export id="enumdef-itemtype"><code><c- g>ItemType</c-></code></dfn> {
    <dfn class="dfn-paneled idl-code" data-dfn-for="ItemType" data-dfn-type="enum-value" data-export id="dom-itemtype-normal"><code><c- s>"normal"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ItemType" data-dfn-type="enum-value" data-export id="dom-itemtype-checkbox"><code><c- s>"checkbox"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ItemType" data-dfn-type="enum-value" data-export id="dom-itemtype-radio"><code><c- s>"radio"</c-></code></dfn>,
    <dfn class="dfn-paneled idl-code" data-dfn-for="ItemType" data-dfn-type="enum-value" data-export id="dom-itemtype-separator"><code><c- s>"separator"</c-></code></dfn>,
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-onclickdata"><code><c- g>OnClickData</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②⓪"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-onclickdata-checked"><code><c- g>checked</c-></code></dfn>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-onclickdata-editable"><code><c- g>editable</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long④"><c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="long" id="dom-onclickdata-frameid"><code><c- g>frameId</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-onclickdata-frameurl"><code><c- g>frameUrl</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-onclickdata-linkurl"><code><c- g>linkUrl</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑥"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-onclickdata-mediatype"><code><c- g>mediaType</c-></code></dfn>;
    <c- b>required</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑦"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long⑤"><c- b>long</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="(DOMString or long)" id="dom-onclickdata-menuitemid"><code><c- g>menuItemId</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-onclickdata-pageurl"><code><c- g>pageUrl</c-></code></dfn>;
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑧"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long⑥"><c- b>long</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="(DOMString or long)" id="dom-onclickdata-parentmenuid"><code><c- g>parentMenuId</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑨"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-onclickdata-selectiontext"><code><c- g>selectionText</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString④"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-onclickdata-srcurl"><code><c- g>srcUrl</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="OnClickData" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-onclickdata-waschecked"><code><c- g>wasChecked</c-></code></dfn>;
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-contextmenuseventlistener"><code><c- g>ContextMenusEventListener</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①③"><c- b>undefined</c-></a> (<a data-link-type="idl-name" href="#dictdef-onclickdata" id="ref-for-dictdef-onclickdata"><c- n>OnClickData</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusEventListener" data-dfn-type="argument" data-export id="dom-contextmenuseventlistener-data"><code><c- g>data</c-></code></dfn>);

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-contextmenusproperties"><code><c- g>ContextMenusProperties</c-></code></dfn> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②③"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-contextmenusproperties-checked"><code><c- g>checked</c-></code></dfn>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence⑦"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-contexttype" id="ref-for-enumdef-contexttype"><c- n>ContextType</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="sequence<ContextType>" id="dom-contextmenusproperties-context"><code><c- g>context</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②⓪"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-contextmenusproperties-documenturlpatterns"><code><c- g>documentUrlPatterns</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-contextmenusproperties-enabled"><code><c- g>enabled</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-contextmenusproperties-parentid"><code><c- g>parentId</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-contextmenusproperties-targeturlpatterns"><code><c- g>targetUrlPatterns</c-></code></dfn>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-contextmenusproperties-title"><code><c- g>title</c-></code></dfn>;
    <a data-link-type="idl-name" href="#enumdef-itemtype" id="ref-for-enumdef-itemtype"><c- n>ItemType</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="ItemType" id="dom-contextmenusproperties-type"><code><c- g>type</c-></code></dfn>;
    <a data-link-type="idl-name" href="#callbackdef-contextmenuseventlistener" id="ref-for-callbackdef-contextmenuseventlistener"><c- n>ContextMenusEventListener</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusProperties" data-dfn-type="dict-member" data-export data-type="ContextMenusEventListener" id="dom-contextmenusproperties-onclick"><code><c- g>onclick</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-contextmenuscreateproperties"><code><c- g>ContextMenusCreateProperties</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-contextmenusproperties" id="ref-for-dictdef-contextmenusproperties"><c- n>ContextMenusProperties</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenusCreateProperties" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-contextmenuscreateproperties-id"><code><c- g>id</c-></code></dfn>;
};

<c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-contextmenuscallback"><code><c- g>ContextMenusCallback</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①④"><c- b>undefined</c-></a> ();

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="contextmenus"><code><c- g>ContextMenus</c-></code></dfn> {
    // TODO: Define the `onShow` property.

    // Returns the ID of the newly created menu item.
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②⑤"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long⑦"><c- b>long</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus" data-dfn-type="method" data-export data-lt="create(properties, callback)" id="dom-contextmenus-create"><code><c- g>create</c-></code></dfn>(
        <a data-link-type="idl-name" href="#dictdef-contextmenuscreateproperties" id="ref-for-dictdef-contextmenuscreateproperties"><c- n>ContextMenusCreateProperties</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/create(properties, callback)" data-dfn-type="argument" data-export id="dom-contextmenus-create-properties-callback-properties"><code><c- g>properties</c-></code></dfn>,
        <a data-link-type="idl-name" href="#callbackdef-contextmenuscallback" id="ref-for-callbackdef-contextmenuscallback"><c- n>ContextMenusCallback</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/create(properties, callback)" data-dfn-type="argument" data-export id="dom-contextmenus-create-properties-callback-callback"><code><c- g>callback</c-></code></dfn>);

    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①⑤"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus" data-dfn-type="method" data-export data-lt="remove(menuItemId, callback)" id="dom-contextmenus-remove"><code><c- g>remove</c-></code></dfn>(
        (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②⑥"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long⑧"><c- b>long</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/remove(menuItemId, callback)" data-dfn-type="argument" data-export id="dom-contextmenus-remove-menuitemid-callback-menuitemid"><code><c- g>menuItemId</c-></code></dfn>,
        <a data-link-type="idl-name" href="#callbackdef-contextmenuscallback" id="ref-for-callbackdef-contextmenuscallback①"><c- n>ContextMenusCallback</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/remove(menuItemId, callback)" data-dfn-type="argument" data-export id="dom-contextmenus-remove-menuitemid-callback-callback"><code><c- g>callback</c-></code></dfn>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①⑥"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus" data-dfn-type="method" data-export data-lt="removeAll(callback)" id="dom-contextmenus-removeall"><code><c- g>removeAll</c-></code></dfn>(<a data-link-type="idl-name" href="#callbackdef-contextmenuscallback" id="ref-for-callbackdef-contextmenuscallback②"><c- n>ContextMenusCallback</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/removeAll(callback)" data-dfn-type="argument" data-export id="dom-contextmenus-removeall-callback-callback"><code><c- g>callback</c-></code></dfn>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined①⑦"><c- b>undefined</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus" data-dfn-type="method" data-export data-lt="update(id, properties, callback)" id="dom-contextmenus-update"><code><c- g>update</c-></code></dfn>(
        (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②⑦"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long⑨"><c- b>long</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/update(id, properties, callback)" data-dfn-type="argument" data-export id="dom-contextmenus-update-id-properties-callback-id"><code><c- g>id</c-></code></dfn>,
        <a data-link-type="idl-name" href="#dictdef-contextmenusproperties" id="ref-for-dictdef-contextmenusproperties①"><c- n>ContextMenusProperties</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/update(id, properties, callback)" data-dfn-type="argument" data-export id="dom-contextmenus-update-id-properties-callback-properties"><code><c- g>properties</c-></code></dfn>,
        <a data-link-type="idl-name" href="#callbackdef-contextmenuscallback" id="ref-for-callbackdef-contextmenuscallback③"><c- n>ContextMenusCallback</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="ContextMenus/update(id, properties, callback)" data-dfn-type="argument" data-export id="dom-contextmenus-update-id-properties-callback-callback"><code><c- g>callback</c-></code></dfn>);
};
</pre>
   <h2 class="heading settled" data-level="8" id="acknowledgements"><span class="secno">8. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>The following people contributed to the development of this document.</p>
   <ul>
    <li data-md>
     <p><a href="https://github.com/odejesush">Ovidio Ruiz-Henríquez</a></p>
   </ul>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-controlledframe-addcontentscripts">addContentScripts(contentScriptList)</a><span>, in § 6.1</span>
   <li><a href="#dom-contexttype-all">"all"</a><span>, in § 7</span>
   <li><a href="#dom-contentscriptdetails-all_frames">all_frames</a><span>, in § 6.3</span>
   <li><a href="#dom-controlledframe-allowfullscreen">allowfullscreen</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-allowscaling">allowscaling</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-allowtransparency">allowtransparency</a><span>, in § 6.1</span>
   <li><a href="#dom-cleardatatypeset-appcache">appcache</a><span>, in § 6.4</span>
   <li><a href="#dom-contexttype-audio">"audio"</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-autosize">autosize</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-back">back()</a><span>, in § 6.1</span>
   <li><a href="#dom-cleardatatypeset-cache">cache</a><span>, in § 6.4</span>
   <li><a href="#dom-controlledframe-cangoback">canGoBack()</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-cangoforward">canGoForward()</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-capturevisibleregion">captureVisibleRegion()</a><span>, in § 6.1</span>
   <li><a href="#dom-itemtype-checkbox">"checkbox"</a><span>, in § 7</span>
   <li>
    checked
    <ul>
     <li><a href="#dom-contextmenusproperties-checked">dict-member for ContextMenusProperties</a><span>, in § 7</span>
     <li><a href="#dom-onclickdata-checked">dict-member for OnClickData</a><span>, in § 7</span>
    </ul>
   <li><a href="#dom-controlledframe-cleardata">clearData()</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-cleardata">clearData(options)</a><span>, in § 6.1</span>
   <li><a href="#dictdef-cleardataoptions">ClearDataOptions</a><span>, in § 6.4</span>
   <li><a href="#dom-controlledframe-cleardata">clearData(options, types)</a><span>, in § 6.1</span>
   <li><a href="#dictdef-cleardatatypeset">ClearDataTypeSet</a><span>, in § 6.4</span>
   <li>
    code
    <ul>
     <li><a href="#dom-injectdetails-code">dict-member for InjectDetails</a><span>, in § 6.3</span>
     <li><a href="#dom-injectionitems-code">dict-member for InjectionItems</a><span>, in § 6.3</span>
    </ul>
   <li><a href="#dom-controlledframe-controlledframe">constructor()</a><span>, in § 6.1</span>
   <li><a href="#dictdef-contentscriptdetails">ContentScriptDetails</a><span>, in § 6.3</span>
   <li><a href="#dom-controlledframe-contentwindow">contentWindow</a><span>, in § 6.1</span>
   <li><a href="#dom-contextmenusproperties-context">context</a><span>, in § 7</span>
   <li><a href="#contextmenus">ContextMenus</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-contextmenus">contextMenus</a><span>, in § 6.1</span>
   <li><a href="#callbackdef-contextmenuscallback">ContextMenusCallback</a><span>, in § 7</span>
   <li><a href="#dictdef-contextmenuscreateproperties">ContextMenusCreateProperties</a><span>, in § 7</span>
   <li><a href="#callbackdef-contextmenuseventlistener">ContextMenusEventListener</a><span>, in § 7</span>
   <li><a href="#dictdef-contextmenusproperties">ContextMenusProperties</a><span>, in § 7</span>
   <li><a href="#enumdef-contexttype">ContextType</a><span>, in § 7</span>
   <li><a href="#controlledframe">ControlledFrame</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-controlledframe">ControlledFrame()</a><span>, in § 6.1</span>
   <li><a href="#dom-cleardatatypeset-cookies">cookies</a><span>, in § 6.4</span>
   <li><a href="#dom-contextmenus-create">create(properties, callback)</a><span>, in § 7</span>
   <li><a href="#dom-contentscriptdetails-css">css</a><span>, in § 6.3</span>
   <li><a href="#dom-runat-document_end">"document_end"</a><span>, in § 6.3</span>
   <li><a href="#dom-runat-document_idle">"document_idle"</a><span>, in § 6.3</span>
   <li><a href="#dom-runat-document_start">"document_start"</a><span>, in § 6.3</span>
   <li><a href="#dom-contextmenusproperties-documenturlpatterns">documentUrlPatterns</a><span>, in § 7</span>
   <li><a href="#dom-contexttype-editable">"editable"</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-editable">editable</a><span>, in § 7</span>
   <li><a href="#dom-contextmenusproperties-enabled">enabled</a><span>, in § 7</span>
   <li><a href="#dom-contentscriptdetails-exclude_globs">exclude_globs</a><span>, in § 6.3</span>
   <li><a href="#dom-contentscriptdetails-exclude_matches">exclude_matches</a><span>, in § 6.3</span>
   <li><a href="#dom-controlledframe-executescript">executeScript()</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-executescript">executeScript(details)</a><span>, in § 6.1</span>
   <li><a href="#dom-injectdetails-file">file</a><span>, in § 6.3</span>
   <li><a href="#dom-injectionitems-files">files</a><span>, in § 6.3</span>
   <li><a href="#dom-cleardatatypeset-filesystems">fileSystems</a><span>, in § 6.4</span>
   <li><a href="#dom-controlledframe-forward">forward()</a><span>, in § 6.1</span>
   <li><a href="#dom-contexttype-frame">"frame"</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-frameid">frameId</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-frameurl">frameUrl</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-getaudiostate">getAudioState()</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-getzoom">getZoom()</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-go">go(relativeIndex)</a><span>, in § 6.1</span>
   <li><a href="#dom-contextmenuscreateproperties-id">id</a><span>, in § 7</span>
   <li><a href="#dom-contexttype-image">"image"</a><span>, in § 7</span>
   <li><a href="#dom-contentscriptdetails-include_globs">include_globs</a><span>, in § 6.3</span>
   <li><a href="#dom-cleardatatypeset-indexeddb">indexedDB</a><span>, in § 6.4</span>
   <li><a href="#dictdef-injectdetails">InjectDetails</a><span>, in § 6.3</span>
   <li><a href="#dictdef-injectionitems">InjectionItems</a><span>, in § 6.3</span>
   <li><a href="#dom-controlledframe-insertcss">insertCSS()</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-insertcss">insertCSS(details)</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-isaudiomuted">isAudioMuted()</a><span>, in § 6.1</span>
   <li><a href="#enumdef-itemtype">ItemType</a><span>, in § 7</span>
   <li><a href="#dom-contentscriptdetails-js">js</a><span>, in § 6.3</span>
   <li><a href="#dom-contexttype-link">"link"</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-linkurl">linkUrl</a><span>, in § 7</span>
   <li><a href="#dom-cleardatatypeset-localstorage">localStorage</a><span>, in § 6.4</span>
   <li><a href="#dom-contentscriptdetails-match_about_blank">match_about_blank</a><span>, in § 6.3</span>
   <li><a href="#dom-contentscriptdetails-matches">matches</a><span>, in § 6.3</span>
   <li><a href="#dom-controlledframe-maxheight">maxheight</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-maxwidth">maxwidth</a><span>, in § 6.1</span>
   <li><a href="#dom-onclickdata-mediatype">mediaType</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-menuitemid">menuItemId</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-minheight">minheight</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-minwidth">minwidth</a><span>, in § 6.1</span>
   <li>
    name
    <ul>
     <li><a href="#dom-controlledframe-name">attribute for ControlledFrame</a><span>, in § 6.1</span>
     <li><a href="#dom-contentscriptdetails-name">dict-member for ContentScriptDetails</a><span>, in § 6.3</span>
    </ul>
   <li><a href="#dom-itemtype-normal">"normal"</a><span>, in § 7</span>
   <li><a href="#dom-contextmenusproperties-onclick">onclick</a><span>, in § 7</span>
   <li><a href="#dictdef-onclickdata">OnClickData</a><span>, in § 7</span>
   <li><a href="#dom-contexttype-page">"page"</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-pageurl">pageUrl</a><span>, in § 7</span>
   <li><a href="#dom-contextmenusproperties-parentid">parentId</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-parentmenuid">parentMenuId</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-partition">partition</a><span>, in § 6.1</span>
   <li><a href="#dom-cleardatatypeset-persistentcookies">persistentCookies</a><span>, in § 6.4</span>
   <li><a href="#dom-controlledframe-print">print()</a><span>, in § 6.1</span>
   <li><a href="#dom-itemtype-radio">"radio"</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-reload">reload()</a><span>, in § 6.1</span>
   <li><a href="#dom-contextmenus-removeall">removeAll(callback)</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-removecontentscripts">removeContentScripts(scriptNameList)</a><span>, in § 6.1</span>
   <li><a href="#dom-contextmenus-remove">remove(menuItemId, callback)</a><span>, in § 7</span>
   <li><a href="#dom-contentscriptdetails-run_at">run_at</a><span>, in § 6.3</span>
   <li><a href="#enumdef-runat">RunAt</a><span>, in § 6.3</span>
   <li><a href="#dom-contexttype-selection">"selection"</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-selectiontext">selectionText</a><span>, in § 7</span>
   <li><a href="#dom-itemtype-separator">"separator"</a><span>, in § 7</span>
   <li><a href="#dom-cleardatatypeset-sessioncookies">sessionCookies</a><span>, in § 6.4</span>
   <li><a href="#dom-controlledframe-setaudiomuted">setAudioMuted(mute)</a><span>, in § 6.1</span>
   <li><a href="#dom-controlledframe-setzoom">setZoom(zoomFactor)</a><span>, in § 6.1</span>
   <li><a href="#dom-cleardataoptions-since">since</a><span>, in § 6.4</span>
   <li><a href="#dom-controlledframe-src">src</a><span>, in § 6.1</span>
   <li><a href="#dom-onclickdata-srcurl">srcUrl</a><span>, in § 7</span>
   <li><a href="#dom-controlledframe-stop">stop()</a><span>, in § 6.1</span>
   <li><a href="#dom-contextmenusproperties-targeturlpatterns">targetUrlPatterns</a><span>, in § 7</span>
   <li><a href="#dom-contextmenusproperties-title">title</a><span>, in § 7</span>
   <li><a href="#dom-contextmenusproperties-type">type</a><span>, in § 7</span>
   <li><a href="#dom-contextmenus-update">update(id, properties, callback)</a><span>, in § 7</span>
   <li><a href="#dom-contexttype-video">"video"</a><span>, in § 7</span>
   <li><a href="#dom-onclickdata-waschecked">wasChecked</a><span>, in § 7</span>
   <li><a href="#dom-cleardatatypeset-websql">webSQL</a><span>, in § 6.4</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="402ed79d">CEReactions</span>
     <li><span class="dfn-paneled" id="973aaf8e">HTMLConstructor</span>
     <li><span class="dfn-paneled" id="b08d0bb2">HTMLElement</span>
     <li><span class="dfn-paneled" id="94039a0c">WindowProxy</span>
     <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="6c6b1005">any</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="f8de33a3">long</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-permissions">[Permissions]
   <dd>Marcos Caceres; Mike Taylor. <a href="https://w3c.github.io/permissions/"><cite>Permissions</cite></a>. URL: <a href="https://w3c.github.io/permissions/">https://w3c.github.io/permissions/</a>
   <dt id="biblio-permissions-policy">[Permissions-Policy]
   <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>Permissions Policy</cite></a>. URL: <a href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-high-watermark-permissions">[High-Watermark-Permissions]
   <dd>Robbie McElrath. <a href="https://github.com/WICG/isolated-web-apps/blob/main/Permissions.md"><cite>Isolated Web Apps High Watermark Permissions Explainer</cite></a>. URL: <a href="https://github.com/WICG/isolated-web-apps/blob/main/Permissions.md">https://github.com/WICG/isolated-web-apps/blob/main/Permissions.md</a>
   <dt id="biblio-isolated-web-apps">[Isolated-Web-Apps]
   <dd>Reilly Grant. <a href="https://github.com/WICG/isolated-web-apps/blob/main/README.md"><cite>Isolated Web Apps Explainer</cite></a>. URL: <a href="https://github.com/WICG/isolated-web-apps/blob/main/README.md">https://github.com/WICG/isolated-web-apps/blob/main/README.md</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#controlledframe"><code><c- g>ControlledFrame</c-></code></a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/dom.html#htmlelement"><c- n>HTMLElement</c-></a> {
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor"><c- g>HTMLConstructor</c-></a>] <a href="#dom-controlledframe-controlledframe"><code><c- g>constructor</c-></code></a>();

    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-controlledframe-src"><code><c- g>src</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-controlledframe-name"><code><c- g>name</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-controlledframe-allowfullscreen"><code><c- g>allowfullscreen</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-controlledframe-allowscaling"><code><c- g>allowscaling</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-controlledframe-allowtransparency"><code><c- g>allowtransparency</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-controlledframe-autosize"><code><c- g>autosize</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-controlledframe-maxheight"><code><c- g>maxheight</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-controlledframe-maxwidth"><code><c- g>maxwidth</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-controlledframe-minheight"><code><c- g>minheight</c-></code></a>;
    [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-controlledframe-minwidth"><code><c- g>minwidth</c-></code></a>;
    <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-controlledframe-partition"><code><c- g>partition</c-></code></a>;

    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy"><c- n>WindowProxy</c-></a>? <a data-readonly data-type="WindowProxy?" href="#dom-controlledframe-contentwindow"><code><c- g>contentWindow</c-></code></a>;
    <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#contextmenus"><c- n>ContextMenus</c-></a> <a data-readonly data-type="ContextMenus" href="#dom-controlledframe-contextmenus"><code><c- g>contextMenus</c-></code></a>;

    // Navigation methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-controlledframe-back"><code><c- g>back</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-controlledframe-cangoback"><code><c- g>canGoBack</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-controlledframe-cangoforward"><code><c- g>canGoForward</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-controlledframe-forward"><code><c- g>forward</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-controlledframe-go"><code><c- g>go</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a> <a href="#dom-controlledframe-go-relativeindex-relativeindex"><code><c- g>relativeIndex</c-></code></a>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-controlledframe-reload"><code><c- g>reload</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-controlledframe-stop"><code><c- g>stop</c-></code></a>();

    // Scripting methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-controlledframe-addcontentscripts"><code><c- g>addContentScripts</c-></code></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-contentscriptdetails"><c- n>ContentScriptDetails</c-></a>> <a href="#dom-controlledframe-addcontentscripts-contentscriptlist-contentscriptlist"><code><c- g>contentScriptList</c-></code></a>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a href="#dom-controlledframe-executescript"><code><c- g>executeScript</c-></code></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-injectdetails"><c- n>InjectDetails</c-></a> <a href="#dom-controlledframe-executescript-details-details"><code><c- g>details</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-controlledframe-insertcss"><code><c- g>insertCSS</c-></code></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-injectdetails"><c- n>InjectDetails</c-></a> <a href="#dom-controlledframe-insertcss-details-details"><code><c- g>details</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-controlledframe-removecontentscripts"><code><c- g>removeContentScripts</c-></code></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>? <a href="#dom-controlledframe-removecontentscripts-scriptnamelist-scriptnamelist"><code><c- g>scriptNameList</c-></code></a>);

    // Configuration methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-controlledframe-cleardata"><code><c- g>clearData</c-></code></a>(
      <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-cleardataoptions"><c- n>ClearDataOptions</c-></a> <a href="#dom-controlledframe-cleardata-options-types-options"><code><c- g>options</c-></code></a> = {},
      <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-cleardatatypeset"><c- n>ClearDataTypeSet</c-></a> <a href="#dom-controlledframe-cleardata-options-types-types"><code><c- g>types</c-></code></a> = {});
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a href="#dom-controlledframe-getaudiostate"><code><c- g>getAudioState</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>> <a href="#dom-controlledframe-getzoom"><code><c- g>getZoom</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a>> <a href="#dom-controlledframe-isaudiomuted"><code><c- g>isAudioMuted</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-controlledframe-setaudiomuted"><code><c- g>setAudioMuted</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a href="#dom-controlledframe-setaudiomuted-mute-mute"><code><c- g>mute</c-></code></a>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a>> <a href="#dom-controlledframe-setzoom"><code><c- g>setZoom</c-></code></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a> <a href="#dom-controlledframe-setzoom-zoomfactor-zoomfactor"><code><c- g>zoomFactor</c-></code></a>);

    // Capture methods.
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-controlledframe-capturevisibleregion"><code><c- g>captureVisibleRegion</c-></code></a>();
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-controlledframe-print"><code><c- g>print</c-></code></a>();
};

// One of |code| or |file| must be specified but not both.
<c- b>dictionary</c-> <a href="#dictdef-injectdetails"><code><c- g>InjectDetails</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-injectdetails-code"><code><c- g>code</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-injectdetails-file"><code><c- g>file</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-injectionitems"><code><c- g>InjectionItems</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-injectionitems-code"><code><c- g>code</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-injectionitems-files"><code><c- g>files</c-></code></a>;
};

<c- b>enum</c-> <a href="#enumdef-runat"><code><c- g>RunAt</c-></code></a> {
  <a href="#dom-runat-document_start"><code><c- s>"document_start"</c-></code></a>,
  <a href="#dom-runat-document_end"><code><c- s>"document_end"</c-></code></a>,
  <a href="#dom-runat-document_idle"><code><c- s>"document_idle"</c-></code></a>,
};

<c- b>dictionary</c-> <a href="#dictdef-contentscriptdetails"><code><c- g>ContentScriptDetails</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-contentscriptdetails-all_frames"><code><c- g>all_frames</c-></code></a>;
  <a data-link-type="idl-name" href="#dictdef-injectionitems"><c- n>InjectionItems</c-></a> <a data-type="InjectionItems" href="#dom-contentscriptdetails-css"><code><c- g>css</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-contentscriptdetails-exclude_globs"><code><c- g>exclude_globs</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-contentscriptdetails-exclude_matches"><code><c- g>exclude_matches</c-></code></a>;
  <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-contentscriptdetails-include_globs"><code><c- g>include_globs</c-></code></a>;
  <a data-link-type="idl-name" href="#dictdef-injectionitems"><c- n>InjectionItems</c-></a> <a data-type="InjectionItems" href="#dom-contentscriptdetails-js"><code><c- g>js</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-contentscriptdetails-match_about_blank"><code><c- g>match_about_blank</c-></code></a>;
  <c- b>required</c-> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a data-type="sequence<DOMString>" href="#dom-contentscriptdetails-matches"><code><c- g>matches</c-></code></a>;
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-contentscriptdetails-name"><code><c- g>name</c-></code></a>;
  <a data-link-type="idl-name" href="#enumdef-runat"><c- n>RunAt</c-></a> <a data-type="RunAt" href="#dom-contentscriptdetails-run_at"><code><c- g>run_at</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-cleardataoptions"><code><c- g>ClearDataOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a> <a data-type="long" href="#dom-cleardataoptions-since"><code><c- g>since</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-cleardatatypeset"><code><c- g>ClearDataTypeSet</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-appcache"><code><c- g>appcache</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-cache"><code><c- g>cache</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-cookies"><code><c- g>cookies</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-filesystems"><code><c- g>fileSystems</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-indexeddb"><code><c- g>indexedDB</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-localstorage"><code><c- g>localStorage</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-persistentcookies"><code><c- g>persistentCookies</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-sessioncookies"><code><c- g>sessionCookies</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-cleardatatypeset-websql"><code><c- g>webSQL</c-></code></a>;
};

<c- b>enum</c-> <a href="#enumdef-contexttype"><code><c- g>ContextType</c-></code></a> {
    <a href="#dom-contexttype-all"><code><c- s>"all"</c-></code></a>,
    <a href="#dom-contexttype-page"><code><c- s>"page"</c-></code></a>,
    <a href="#dom-contexttype-frame"><code><c- s>"frame"</c-></code></a>,
    <a href="#dom-contexttype-selection"><code><c- s>"selection"</c-></code></a>,
    <a href="#dom-contexttype-link"><code><c- s>"link"</c-></code></a>,
    <a href="#dom-contexttype-editable"><code><c- s>"editable"</c-></code></a>,
    <a href="#dom-contexttype-image"><code><c- s>"image"</c-></code></a>,
    <a href="#dom-contexttype-video"><code><c- s>"video"</c-></code></a>,
    <a href="#dom-contexttype-audio"><code><c- s>"audio"</c-></code></a>,
};

<c- b>enum</c-> <a href="#enumdef-itemtype"><code><c- g>ItemType</c-></code></a> {
    <a href="#dom-itemtype-normal"><code><c- s>"normal"</c-></code></a>,
    <a href="#dom-itemtype-checkbox"><code><c- s>"checkbox"</c-></code></a>,
    <a href="#dom-itemtype-radio"><code><c- s>"radio"</c-></code></a>,
    <a href="#dom-itemtype-separator"><code><c- s>"separator"</c-></code></a>,
};

<c- b>dictionary</c-> <a href="#dictdef-onclickdata"><code><c- g>OnClickData</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-onclickdata-checked"><code><c- g>checked</c-></code></a>;
    <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-onclickdata-editable"><code><c- g>editable</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a> <a data-type="long" href="#dom-onclickdata-frameid"><code><c- g>frameId</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-onclickdata-frameurl"><code><c- g>frameUrl</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-onclickdata-linkurl"><code><c- g>linkUrl</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-onclickdata-mediatype"><code><c- g>mediaType</c-></code></a>;
    <c- b>required</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>) <a data-type="(DOMString or long)" href="#dom-onclickdata-menuitemid"><code><c- g>menuItemId</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-onclickdata-pageurl"><code><c- g>pageUrl</c-></code></a>;
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>) <a data-type="(DOMString or long)" href="#dom-onclickdata-parentmenuid"><code><c- g>parentMenuId</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-onclickdata-selectiontext"><code><c- g>selectionText</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-onclickdata-srcurl"><code><c- g>srcUrl</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-onclickdata-waschecked"><code><c- g>wasChecked</c-></code></a>;
};

<c- b>callback</c-> <a href="#callbackdef-contextmenuseventlistener"><code><c- g>ContextMenusEventListener</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> (<a data-link-type="idl-name" href="#dictdef-onclickdata"><c- n>OnClickData</c-></a> <a href="#dom-contextmenuseventlistener-data"><code><c- g>data</c-></code></a>);

<c- b>dictionary</c-> <a href="#dictdef-contextmenusproperties"><code><c- g>ContextMenusProperties</c-></code></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-contextmenusproperties-checked"><code><c- g>checked</c-></code></a>;
    <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#enumdef-contexttype"><c- n>ContextType</c-></a>> <a data-type="sequence<ContextType>" href="#dom-contextmenusproperties-context"><code><c- g>context</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-contextmenusproperties-documenturlpatterns"><code><c- g>documentUrlPatterns</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-contextmenusproperties-enabled"><code><c- g>enabled</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-contextmenusproperties-parentid"><code><c- g>parentId</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-contextmenusproperties-targeturlpatterns"><code><c- g>targetUrlPatterns</c-></code></a>;
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-contextmenusproperties-title"><code><c- g>title</c-></code></a>;
    <a data-link-type="idl-name" href="#enumdef-itemtype"><c- n>ItemType</c-></a> <a data-type="ItemType" href="#dom-contextmenusproperties-type"><code><c- g>type</c-></code></a>;
    <a data-link-type="idl-name" href="#callbackdef-contextmenuseventlistener"><c- n>ContextMenusEventListener</c-></a> <a data-type="ContextMenusEventListener" href="#dom-contextmenusproperties-onclick"><code><c- g>onclick</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-contextmenuscreateproperties"><code><c- g>ContextMenusCreateProperties</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-contextmenusproperties"><c- n>ContextMenusProperties</c-></a> {
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-contextmenuscreateproperties-id"><code><c- g>id</c-></code></a>;
};

<c- b>callback</c-> <a href="#callbackdef-contextmenuscallback"><code><c- g>ContextMenusCallback</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> ();

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>]
<c- b>interface</c-> <a href="#contextmenus"><code><c- g>ContextMenus</c-></code></a> {
    // TODO: Define the `onShow` property.

    // Returns the ID of the newly created menu item.
    (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>) <a href="#dom-contextmenus-create"><code><c- g>create</c-></code></a>(
        <a data-link-type="idl-name" href="#dictdef-contextmenuscreateproperties"><c- n>ContextMenusCreateProperties</c-></a> <a href="#dom-contextmenus-create-properties-callback-properties"><code><c- g>properties</c-></code></a>,
        <a data-link-type="idl-name" href="#callbackdef-contextmenuscallback"><c- n>ContextMenusCallback</c-></a>? <a href="#dom-contextmenus-create-properties-callback-callback"><code><c- g>callback</c-></code></a>);

    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-contextmenus-remove"><code><c- g>remove</c-></code></a>(
        (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>) <a href="#dom-contextmenus-remove-menuitemid-callback-menuitemid"><code><c- g>menuItemId</c-></code></a>,
        <a data-link-type="idl-name" href="#callbackdef-contextmenuscallback"><c- n>ContextMenusCallback</c-></a>? <a href="#dom-contextmenus-remove-menuitemid-callback-callback"><code><c- g>callback</c-></code></a>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-contextmenus-removeall"><code><c- g>removeAll</c-></code></a>(<a data-link-type="idl-name" href="#callbackdef-contextmenuscallback"><c- n>ContextMenusCallback</c-></a>? <a href="#dom-contextmenus-removeall-callback-callback"><code><c- g>callback</c-></code></a>);
    <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a href="#dom-contextmenus-update"><code><c- g>update</c-></code></a>(
        (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <c- b>or</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-long"><c- b>long</c-></a>) <a href="#dom-contextmenus-update-id-properties-callback-id"><code><c- g>id</c-></code></a>,
        <a data-link-type="idl-name" href="#dictdef-contextmenusproperties"><c- n>ContextMenusProperties</c-></a> <a href="#dom-contextmenus-update-id-properties-callback-properties"><code><c- g>properties</c-></code></a>,
        <a data-link-type="idl-name" href="#callbackdef-contextmenuscallback"><c- n>ContextMenusCallback</c-></a>? <a href="#dom-contextmenus-update-id-properties-callback-callback"><code><c- g>callback</c-></code></a>);
};

</pre>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"402ed79d": {"dfnID":"402ed79d","dfnText":"CEReactions","external":true,"refSections":[{"refs":[{"id":"ref-for-cereactions"},{"id":"ref-for-cereactions\u2460"},{"id":"ref-for-cereactions\u2461"},{"id":"ref-for-cereactions\u2462"},{"id":"ref-for-cereactions\u2463"},{"id":"ref-for-cereactions\u2464"},{"id":"ref-for-cereactions\u2465"},{"id":"ref-for-cereactions\u2466"},{"id":"ref-for-cereactions\u2467"},{"id":"ref-for-cereactions\u2468"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"},{"id":"ref-for-idl-boolean\u2460"},{"id":"ref-for-idl-boolean\u2461"},{"id":"ref-for-idl-boolean\u2462"},{"id":"ref-for-idl-boolean\u2463"},{"id":"ref-for-idl-boolean\u2464"},{"id":"ref-for-idl-boolean\u2465"},{"id":"ref-for-idl-boolean\u2466"},{"id":"ref-for-idl-boolean\u2467"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-idl-boolean\u2468"},{"id":"ref-for-idl-boolean\u2460\u24ea"}],"title":"6.3. Scripting methods"},{"refs":[{"id":"ref-for-idl-boolean\u2460\u2460"},{"id":"ref-for-idl-boolean\u2460\u2461"},{"id":"ref-for-idl-boolean\u2460\u2462"},{"id":"ref-for-idl-boolean\u2460\u2463"},{"id":"ref-for-idl-boolean\u2460\u2464"},{"id":"ref-for-idl-boolean\u2460\u2465"},{"id":"ref-for-idl-boolean\u2460\u2466"},{"id":"ref-for-idl-boolean\u2460\u2467"},{"id":"ref-for-idl-boolean\u2460\u2468"}],"title":"6.4. Configuration methods"},{"refs":[{"id":"ref-for-idl-boolean\u2461\u24ea"},{"id":"ref-for-idl-boolean\u2461\u2460"},{"id":"ref-for-idl-boolean\u2461\u2461"},{"id":"ref-for-idl-boolean\u2461\u2462"},{"id":"ref-for-idl-boolean\u2461\u2463"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"},{"id":"ref-for-idl-undefined\u2460"},{"id":"ref-for-idl-undefined\u2461"},{"id":"ref-for-idl-undefined\u2462"},{"id":"ref-for-idl-undefined\u2463"},{"id":"ref-for-idl-undefined\u2464"},{"id":"ref-for-idl-undefined\u2465"},{"id":"ref-for-idl-undefined\u2466"},{"id":"ref-for-idl-undefined\u2467"},{"id":"ref-for-idl-undefined\u2468"},{"id":"ref-for-idl-undefined\u2460\u24ea"},{"id":"ref-for-idl-undefined\u2460\u2460"},{"id":"ref-for-idl-undefined\u2460\u2461"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-idl-undefined\u2460\u2462"},{"id":"ref-for-idl-undefined\u2460\u2463"},{"id":"ref-for-idl-undefined\u2460\u2464"},{"id":"ref-for-idl-undefined\u2460\u2465"},{"id":"ref-for-idl-undefined\u2460\u2466"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"6c6b1005": {"dfnID":"6c6b1005","dfnText":"any","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-any"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"https://webidl.spec.whatwg.org/#idl-any"},
"87fcd40c": {"dfnID":"87fcd40c","dfnText":"iframe","external":true,"refSections":[{"refs":[{"id":"ref-for-the-iframe-element"},{"id":"ref-for-the-iframe-element\u2460"},{"id":"ref-for-the-iframe-element\u2461"},{"id":"ref-for-the-iframe-element\u2462"},{"id":"ref-for-the-iframe-element\u2463"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-the-iframe-element\u2464"},{"id":"ref-for-the-iframe-element\u2465"}],"title":"3.2. Embedding third party web content without restriction"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"},{"id":"ref-for-idl-DOMString\u2461"},{"id":"ref-for-idl-DOMString\u2462"},{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"},{"id":"ref-for-idl-DOMString\u2465"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-idl-DOMString\u2466"},{"id":"ref-for-idl-DOMString\u2467"},{"id":"ref-for-idl-DOMString\u2468"},{"id":"ref-for-idl-DOMString\u2460\u24ea"},{"id":"ref-for-idl-DOMString\u2460\u2460"},{"id":"ref-for-idl-DOMString\u2460\u2461"},{"id":"ref-for-idl-DOMString\u2460\u2462"},{"id":"ref-for-idl-DOMString\u2460\u2463"},{"id":"ref-for-idl-DOMString\u2460\u2464"}],"title":"6.3. Scripting methods"},{"refs":[{"id":"ref-for-idl-DOMString\u2460\u2465"},{"id":"ref-for-idl-DOMString\u2460\u2466"},{"id":"ref-for-idl-DOMString\u2460\u2467"},{"id":"ref-for-idl-DOMString\u2460\u2468"},{"id":"ref-for-idl-DOMString\u2461\u24ea"},{"id":"ref-for-idl-DOMString\u2461\u2460"},{"id":"ref-for-idl-DOMString\u2461\u2461"},{"id":"ref-for-idl-DOMString\u2461\u2462"},{"id":"ref-for-idl-DOMString\u2461\u2463"},{"id":"ref-for-idl-DOMString\u2461\u2464"},{"id":"ref-for-idl-DOMString\u2461\u2465"},{"id":"ref-for-idl-DOMString\u2461\u2466"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"94039a0c": {"dfnID":"94039a0c","dfnText":"WindowProxy","external":true,"refSections":[{"refs":[{"id":"ref-for-windowproxy"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy"},
"973aaf8e": {"dfnID":"973aaf8e","dfnText":"HTMLConstructor","external":true,"refSections":[{"refs":[{"id":"ref-for-htmlconstructor"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"},{"id":"ref-for-idl-sequence\u2460"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-idl-sequence\u2461"},{"id":"ref-for-idl-sequence\u2462"},{"id":"ref-for-idl-sequence\u2463"},{"id":"ref-for-idl-sequence\u2464"},{"id":"ref-for-idl-sequence\u2465"}],"title":"6.3. Scripting methods"},{"refs":[{"id":"ref-for-idl-sequence\u2466"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"b08d0bb2": {"dfnID":"b08d0bb2","dfnText":"HTMLElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmlelement"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#htmlelement"},
"b0d7f3c3": {"dfnID":"b0d7f3c3","dfnText":"USVString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-USVString"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-idl-USVString\u2460"},{"id":"ref-for-idl-USVString\u2461"},{"id":"ref-for-idl-USVString\u2462"},{"id":"ref-for-idl-USVString\u2463"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"b75bb3bd": {"dfnID":"b75bb3bd","dfnText":"SecureContext","external":true,"refSections":[{"refs":[{"id":"ref-for-SecureContext"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-SecureContext\u2460"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#SecureContext"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"},{"id":"ref-for-idl-promise\u2460"},{"id":"ref-for-idl-promise\u2461"},{"id":"ref-for-idl-promise\u2462"},{"id":"ref-for-idl-promise\u2463"},{"id":"ref-for-idl-promise\u2464"},{"id":"ref-for-idl-promise\u2465"},{"id":"ref-for-idl-promise\u2466"},{"id":"ref-for-idl-promise\u2467"},{"id":"ref-for-idl-promise\u2468"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"callbackdef-contextmenuscallback": {"dfnID":"callbackdef-contextmenuscallback","dfnText":"ContextMenusCallback","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-contextmenuscallback"},{"id":"ref-for-callbackdef-contextmenuscallback\u2460"},{"id":"ref-for-callbackdef-contextmenuscallback\u2461"},{"id":"ref-for-callbackdef-contextmenuscallback\u2462"}],"title":"7. Controlled Frame API"}],"url":"#callbackdef-contextmenuscallback"},
"callbackdef-contextmenuseventlistener": {"dfnID":"callbackdef-contextmenuseventlistener","dfnText":"ContextMenusEventListener","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-contextmenuseventlistener"}],"title":"7. Controlled Frame API"}],"url":"#callbackdef-contextmenuseventlistener"},
"contextmenus": {"dfnID":"contextmenus","dfnText":"ContextMenus","external":false,"refSections":[{"refs":[{"id":"ref-for-contextmenus"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"#contextmenus"},
"controlledframe": {"dfnID":"controlledframe","dfnText":"ControlledFrame","external":false,"refSections":[],"url":"#controlledframe"},
"dictdef-cleardataoptions": {"dfnID":"dictdef-cleardataoptions","dfnText":"ClearDataOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-cleardataoptions"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"#dictdef-cleardataoptions"},
"dictdef-cleardatatypeset": {"dfnID":"dictdef-cleardatatypeset","dfnText":"ClearDataTypeSet","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-cleardatatypeset"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"#dictdef-cleardatatypeset"},
"dictdef-contentscriptdetails": {"dfnID":"dictdef-contentscriptdetails","dfnText":"ContentScriptDetails","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-contentscriptdetails"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"#dictdef-contentscriptdetails"},
"dictdef-contextmenuscreateproperties": {"dfnID":"dictdef-contextmenuscreateproperties","dfnText":"ContextMenusCreateProperties","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-contextmenuscreateproperties"}],"title":"7. Controlled Frame API"}],"url":"#dictdef-contextmenuscreateproperties"},
"dictdef-contextmenusproperties": {"dfnID":"dictdef-contextmenusproperties","dfnText":"ContextMenusProperties","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-contextmenusproperties"},{"id":"ref-for-dictdef-contextmenusproperties\u2460"}],"title":"7. Controlled Frame API"}],"url":"#dictdef-contextmenusproperties"},
"dictdef-injectdetails": {"dfnID":"dictdef-injectdetails","dfnText":"InjectDetails","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-injectdetails"},{"id":"ref-for-dictdef-injectdetails\u2460"}],"title":"6.1. Controlled Frame HTML Element"}],"url":"#dictdef-injectdetails"},
"dictdef-injectionitems": {"dfnID":"dictdef-injectionitems","dfnText":"InjectionItems","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-injectionitems"},{"id":"ref-for-dictdef-injectionitems\u2460"}],"title":"6.3. Scripting methods"}],"url":"#dictdef-injectionitems"},
"dictdef-onclickdata": {"dfnID":"dictdef-onclickdata","dfnText":"OnClickData","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-onclickdata"}],"title":"7. Controlled Frame API"}],"url":"#dictdef-onclickdata"},
"dom-cleardataoptions-since": {"dfnID":"dom-cleardataoptions-since","dfnText":"since","external":false,"refSections":[],"url":"#dom-cleardataoptions-since"},
"dom-cleardatatypeset-appcache": {"dfnID":"dom-cleardatatypeset-appcache","dfnText":"appcache","external":false,"refSections":[],"url":"#dom-cleardatatypeset-appcache"},
"dom-cleardatatypeset-cache": {"dfnID":"dom-cleardatatypeset-cache","dfnText":"cache","external":false,"refSections":[],"url":"#dom-cleardatatypeset-cache"},
"dom-cleardatatypeset-cookies": {"dfnID":"dom-cleardatatypeset-cookies","dfnText":"cookies","external":false,"refSections":[],"url":"#dom-cleardatatypeset-cookies"},
"dom-cleardatatypeset-filesystems": {"dfnID":"dom-cleardatatypeset-filesystems","dfnText":"fileSystems","external":false,"refSections":[],"url":"#dom-cleardatatypeset-filesystems"},
"dom-cleardatatypeset-indexeddb": {"dfnID":"dom-cleardatatypeset-indexeddb","dfnText":"indexedDB","external":false,"refSections":[],"url":"#dom-cleardatatypeset-indexeddb"},
"dom-cleardatatypeset-localstorage": {"dfnID":"dom-cleardatatypeset-localstorage","dfnText":"localStorage","external":false,"refSections":[],"url":"#dom-cleardatatypeset-localstorage"},
"dom-cleardatatypeset-persistentcookies": {"dfnID":"dom-cleardatatypeset-persistentcookies","dfnText":"persistentCookies","external":false,"refSections":[],"url":"#dom-cleardatatypeset-persistentcookies"},
"dom-cleardatatypeset-sessioncookies": {"dfnID":"dom-cleardatatypeset-sessioncookies","dfnText":"sessionCookies","external":false,"refSections":[],"url":"#dom-cleardatatypeset-sessioncookies"},
"dom-cleardatatypeset-websql": {"dfnID":"dom-cleardatatypeset-websql","dfnText":"webSQL","external":false,"refSections":[],"url":"#dom-cleardatatypeset-websql"},
"dom-contentscriptdetails-all_frames": {"dfnID":"dom-contentscriptdetails-all_frames","dfnText":"all_frames","external":false,"refSections":[],"url":"#dom-contentscriptdetails-all_frames"},
"dom-contentscriptdetails-css": {"dfnID":"dom-contentscriptdetails-css","dfnText":"css","external":false,"refSections":[],"url":"#dom-contentscriptdetails-css"},
"dom-contentscriptdetails-exclude_globs": {"dfnID":"dom-contentscriptdetails-exclude_globs","dfnText":"exclude_globs","external":false,"refSections":[],"url":"#dom-contentscriptdetails-exclude_globs"},
"dom-contentscriptdetails-exclude_matches": {"dfnID":"dom-contentscriptdetails-exclude_matches","dfnText":"exclude_matches","external":false,"refSections":[],"url":"#dom-contentscriptdetails-exclude_matches"},
"dom-contentscriptdetails-include_globs": {"dfnID":"dom-contentscriptdetails-include_globs","dfnText":"include_globs","external":false,"refSections":[],"url":"#dom-contentscriptdetails-include_globs"},
"dom-contentscriptdetails-js": {"dfnID":"dom-contentscriptdetails-js","dfnText":"js","external":false,"refSections":[],"url":"#dom-contentscriptdetails-js"},
"dom-contentscriptdetails-match_about_blank": {"dfnID":"dom-contentscriptdetails-match_about_blank","dfnText":"match_about_blank","external":false,"refSections":[],"url":"#dom-contentscriptdetails-match_about_blank"},
"dom-contentscriptdetails-matches": {"dfnID":"dom-contentscriptdetails-matches","dfnText":"matches","external":false,"refSections":[],"url":"#dom-contentscriptdetails-matches"},
"dom-contentscriptdetails-name": {"dfnID":"dom-contentscriptdetails-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-contentscriptdetails-name"},
"dom-contentscriptdetails-run_at": {"dfnID":"dom-contentscriptdetails-run_at","dfnText":"run_at","external":false,"refSections":[],"url":"#dom-contentscriptdetails-run_at"},
"dom-contextmenus-create": {"dfnID":"dom-contextmenus-create","dfnText":"create","external":false,"refSections":[],"url":"#dom-contextmenus-create"},
"dom-contextmenus-create-properties-callback-callback": {"dfnID":"dom-contextmenus-create-properties-callback-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-contextmenus-create-properties-callback-callback"},
"dom-contextmenus-create-properties-callback-properties": {"dfnID":"dom-contextmenus-create-properties-callback-properties","dfnText":"properties","external":false,"refSections":[],"url":"#dom-contextmenus-create-properties-callback-properties"},
"dom-contextmenus-remove": {"dfnID":"dom-contextmenus-remove","dfnText":"remove","external":false,"refSections":[],"url":"#dom-contextmenus-remove"},
"dom-contextmenus-remove-menuitemid-callback-callback": {"dfnID":"dom-contextmenus-remove-menuitemid-callback-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-contextmenus-remove-menuitemid-callback-callback"},
"dom-contextmenus-remove-menuitemid-callback-menuitemid": {"dfnID":"dom-contextmenus-remove-menuitemid-callback-menuitemid","dfnText":"menuItemId","external":false,"refSections":[],"url":"#dom-contextmenus-remove-menuitemid-callback-menuitemid"},
"dom-contextmenus-removeall": {"dfnID":"dom-contextmenus-removeall","dfnText":"removeAll","external":false,"refSections":[],"url":"#dom-contextmenus-removeall"},
"dom-contextmenus-removeall-callback-callback": {"dfnID":"dom-contextmenus-removeall-callback-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-contextmenus-removeall-callback-callback"},
"dom-contextmenus-update": {"dfnID":"dom-contextmenus-update","dfnText":"update","external":false,"refSections":[],"url":"#dom-contextmenus-update"},
"dom-contextmenus-update-id-properties-callback-callback": {"dfnID":"dom-contextmenus-update-id-properties-callback-callback","dfnText":"callback","external":false,"refSections":[],"url":"#dom-contextmenus-update-id-properties-callback-callback"},
"dom-contextmenus-update-id-properties-callback-id": {"dfnID":"dom-contextmenus-update-id-properties-callback-id","dfnText":"id","external":false,"refSections":[],"url":"#dom-contextmenus-update-id-properties-callback-id"},
"dom-contextmenus-update-id-properties-callback-properties": {"dfnID":"dom-contextmenus-update-id-properties-callback-properties","dfnText":"properties","external":false,"refSections":[],"url":"#dom-contextmenus-update-id-properties-callback-properties"},
"dom-contextmenuscreateproperties-id": {"dfnID":"dom-contextmenuscreateproperties-id","dfnText":"id","external":false,"refSections":[],"url":"#dom-contextmenuscreateproperties-id"},
"dom-contextmenuseventlistener-data": {"dfnID":"dom-contextmenuseventlistener-data","dfnText":"data","external":false,"refSections":[],"url":"#dom-contextmenuseventlistener-data"},
"dom-contextmenusproperties-checked": {"dfnID":"dom-contextmenusproperties-checked","dfnText":"checked","external":false,"refSections":[],"url":"#dom-contextmenusproperties-checked"},
"dom-contextmenusproperties-context": {"dfnID":"dom-contextmenusproperties-context","dfnText":"context","external":false,"refSections":[],"url":"#dom-contextmenusproperties-context"},
"dom-contextmenusproperties-documenturlpatterns": {"dfnID":"dom-contextmenusproperties-documenturlpatterns","dfnText":"documentUrlPatterns","external":false,"refSections":[],"url":"#dom-contextmenusproperties-documenturlpatterns"},
"dom-contextmenusproperties-enabled": {"dfnID":"dom-contextmenusproperties-enabled","dfnText":"enabled","external":false,"refSections":[],"url":"#dom-contextmenusproperties-enabled"},
"dom-contextmenusproperties-onclick": {"dfnID":"dom-contextmenusproperties-onclick","dfnText":"onclick","external":false,"refSections":[],"url":"#dom-contextmenusproperties-onclick"},
"dom-contextmenusproperties-parentid": {"dfnID":"dom-contextmenusproperties-parentid","dfnText":"parentId","external":false,"refSections":[],"url":"#dom-contextmenusproperties-parentid"},
"dom-contextmenusproperties-targeturlpatterns": {"dfnID":"dom-contextmenusproperties-targeturlpatterns","dfnText":"targetUrlPatterns","external":false,"refSections":[],"url":"#dom-contextmenusproperties-targeturlpatterns"},
"dom-contextmenusproperties-title": {"dfnID":"dom-contextmenusproperties-title","dfnText":"title","external":false,"refSections":[],"url":"#dom-contextmenusproperties-title"},
"dom-contextmenusproperties-type": {"dfnID":"dom-contextmenusproperties-type","dfnText":"type","external":false,"refSections":[],"url":"#dom-contextmenusproperties-type"},
"dom-contexttype-all": {"dfnID":"dom-contexttype-all","dfnText":"\"all\"","external":false,"refSections":[],"url":"#dom-contexttype-all"},
"dom-contexttype-audio": {"dfnID":"dom-contexttype-audio","dfnText":"\"audio\"","external":false,"refSections":[],"url":"#dom-contexttype-audio"},
"dom-contexttype-editable": {"dfnID":"dom-contexttype-editable","dfnText":"\"editable\"","external":false,"refSections":[],"url":"#dom-contexttype-editable"},
"dom-contexttype-frame": {"dfnID":"dom-contexttype-frame","dfnText":"\"frame\"","external":false,"refSections":[],"url":"#dom-contexttype-frame"},
"dom-contexttype-image": {"dfnID":"dom-contexttype-image","dfnText":"\"image\"","external":false,"refSections":[],"url":"#dom-contexttype-image"},
"dom-contexttype-link": {"dfnID":"dom-contexttype-link","dfnText":"\"link\"","external":false,"refSections":[],"url":"#dom-contexttype-link"},
"dom-contexttype-page": {"dfnID":"dom-contexttype-page","dfnText":"\"page\"","external":false,"refSections":[],"url":"#dom-contexttype-page"},
"dom-contexttype-selection": {"dfnID":"dom-contexttype-selection","dfnText":"\"selection\"","external":false,"refSections":[],"url":"#dom-contexttype-selection"},
"dom-contexttype-video": {"dfnID":"dom-contexttype-video","dfnText":"\"video\"","external":false,"refSections":[],"url":"#dom-contexttype-video"},
"dom-controlledframe-addcontentscripts": {"dfnID":"dom-controlledframe-addcontentscripts","dfnText":"addContentScripts","external":false,"refSections":[],"url":"#dom-controlledframe-addcontentscripts"},
"dom-controlledframe-addcontentscripts-contentscriptlist-contentscriptlist": {"dfnID":"dom-controlledframe-addcontentscripts-contentscriptlist-contentscriptlist","dfnText":"contentScriptList","external":false,"refSections":[],"url":"#dom-controlledframe-addcontentscripts-contentscriptlist-contentscriptlist"},
"dom-controlledframe-allowfullscreen": {"dfnID":"dom-controlledframe-allowfullscreen","dfnText":"allowfullscreen","external":false,"refSections":[],"url":"#dom-controlledframe-allowfullscreen"},
"dom-controlledframe-allowscaling": {"dfnID":"dom-controlledframe-allowscaling","dfnText":"allowscaling","external":false,"refSections":[],"url":"#dom-controlledframe-allowscaling"},
"dom-controlledframe-allowtransparency": {"dfnID":"dom-controlledframe-allowtransparency","dfnText":"allowtransparency","external":false,"refSections":[],"url":"#dom-controlledframe-allowtransparency"},
"dom-controlledframe-autosize": {"dfnID":"dom-controlledframe-autosize","dfnText":"autosize","external":false,"refSections":[],"url":"#dom-controlledframe-autosize"},
"dom-controlledframe-back": {"dfnID":"dom-controlledframe-back","dfnText":"back","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-controlledframe-back"}],"title":"6.2. Navigation methods"}],"url":"#dom-controlledframe-back"},
"dom-controlledframe-cangoback": {"dfnID":"dom-controlledframe-cangoback","dfnText":"canGoBack","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-controlledframe-cangoback"}],"title":"6.2. Navigation methods"}],"url":"#dom-controlledframe-cangoback"},
"dom-controlledframe-cangoforward": {"dfnID":"dom-controlledframe-cangoforward","dfnText":"canGoForward","external":false,"refSections":[],"url":"#dom-controlledframe-cangoforward"},
"dom-controlledframe-capturevisibleregion": {"dfnID":"dom-controlledframe-capturevisibleregion","dfnText":"captureVisibleRegion","external":false,"refSections":[],"url":"#dom-controlledframe-capturevisibleregion"},
"dom-controlledframe-cleardata": {"dfnID":"dom-controlledframe-cleardata","dfnText":"clearData","external":false,"refSections":[],"url":"#dom-controlledframe-cleardata"},
"dom-controlledframe-cleardata-options-types-options": {"dfnID":"dom-controlledframe-cleardata-options-types-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-controlledframe-cleardata-options-types-options"},
"dom-controlledframe-cleardata-options-types-types": {"dfnID":"dom-controlledframe-cleardata-options-types-types","dfnText":"types","external":false,"refSections":[],"url":"#dom-controlledframe-cleardata-options-types-types"},
"dom-controlledframe-contentwindow": {"dfnID":"dom-controlledframe-contentwindow","dfnText":"contentWindow","external":false,"refSections":[],"url":"#dom-controlledframe-contentwindow"},
"dom-controlledframe-contextmenus": {"dfnID":"dom-controlledframe-contextmenus","dfnText":"contextMenus","external":false,"refSections":[],"url":"#dom-controlledframe-contextmenus"},
"dom-controlledframe-controlledframe": {"dfnID":"dom-controlledframe-controlledframe","dfnText":"constructor","external":false,"refSections":[],"url":"#dom-controlledframe-controlledframe"},
"dom-controlledframe-executescript": {"dfnID":"dom-controlledframe-executescript","dfnText":"executeScript","external":false,"refSections":[],"url":"#dom-controlledframe-executescript"},
"dom-controlledframe-executescript-details-details": {"dfnID":"dom-controlledframe-executescript-details-details","dfnText":"details","external":false,"refSections":[],"url":"#dom-controlledframe-executescript-details-details"},
"dom-controlledframe-forward": {"dfnID":"dom-controlledframe-forward","dfnText":"forward","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-controlledframe-forward"}],"title":"6.2. Navigation methods"}],"url":"#dom-controlledframe-forward"},
"dom-controlledframe-getaudiostate": {"dfnID":"dom-controlledframe-getaudiostate","dfnText":"getAudioState","external":false,"refSections":[],"url":"#dom-controlledframe-getaudiostate"},
"dom-controlledframe-getzoom": {"dfnID":"dom-controlledframe-getzoom","dfnText":"getZoom","external":false,"refSections":[],"url":"#dom-controlledframe-getzoom"},
"dom-controlledframe-go": {"dfnID":"dom-controlledframe-go","dfnText":"go","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-controlledframe-go"},{"id":"ref-for-dom-controlledframe-go\u2460"}],"title":"6.2. Navigation methods"}],"url":"#dom-controlledframe-go"},
"dom-controlledframe-go-relativeindex-relativeindex": {"dfnID":"dom-controlledframe-go-relativeindex-relativeindex","dfnText":"relativeIndex","external":false,"refSections":[],"url":"#dom-controlledframe-go-relativeindex-relativeindex"},
"dom-controlledframe-insertcss": {"dfnID":"dom-controlledframe-insertcss","dfnText":"insertCSS","external":false,"refSections":[],"url":"#dom-controlledframe-insertcss"},
"dom-controlledframe-insertcss-details-details": {"dfnID":"dom-controlledframe-insertcss-details-details","dfnText":"details","external":false,"refSections":[],"url":"#dom-controlledframe-insertcss-details-details"},
"dom-controlledframe-isaudiomuted": {"dfnID":"dom-controlledframe-isaudiomuted","dfnText":"isAudioMuted","external":false,"refSections":[],"url":"#dom-controlledframe-isaudiomuted"},
"dom-controlledframe-maxheight": {"dfnID":"dom-controlledframe-maxheight","dfnText":"maxheight","external":false,"refSections":[],"url":"#dom-controlledframe-maxheight"},
"dom-controlledframe-maxwidth": {"dfnID":"dom-controlledframe-maxwidth","dfnText":"maxwidth","external":false,"refSections":[],"url":"#dom-controlledframe-maxwidth"},
"dom-controlledframe-minheight": {"dfnID":"dom-controlledframe-minheight","dfnText":"minheight","external":false,"refSections":[],"url":"#dom-controlledframe-minheight"},
"dom-controlledframe-minwidth": {"dfnID":"dom-controlledframe-minwidth","dfnText":"minwidth","external":false,"refSections":[],"url":"#dom-controlledframe-minwidth"},
"dom-controlledframe-name": {"dfnID":"dom-controlledframe-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-controlledframe-name"},
"dom-controlledframe-partition": {"dfnID":"dom-controlledframe-partition","dfnText":"partition","external":false,"refSections":[],"url":"#dom-controlledframe-partition"},
"dom-controlledframe-print": {"dfnID":"dom-controlledframe-print","dfnText":"print","external":false,"refSections":[],"url":"#dom-controlledframe-print"},
"dom-controlledframe-reload": {"dfnID":"dom-controlledframe-reload","dfnText":"reload","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-controlledframe-reload"}],"title":"6.2. Navigation methods"}],"url":"#dom-controlledframe-reload"},
"dom-controlledframe-removecontentscripts": {"dfnID":"dom-controlledframe-removecontentscripts","dfnText":"removeContentScripts","external":false,"refSections":[],"url":"#dom-controlledframe-removecontentscripts"},
"dom-controlledframe-removecontentscripts-scriptnamelist-scriptnamelist": {"dfnID":"dom-controlledframe-removecontentscripts-scriptnamelist-scriptnamelist","dfnText":"scriptNameList","external":false,"refSections":[],"url":"#dom-controlledframe-removecontentscripts-scriptnamelist-scriptnamelist"},
"dom-controlledframe-setaudiomuted": {"dfnID":"dom-controlledframe-setaudiomuted","dfnText":"setAudioMuted","external":false,"refSections":[],"url":"#dom-controlledframe-setaudiomuted"},
"dom-controlledframe-setaudiomuted-mute-mute": {"dfnID":"dom-controlledframe-setaudiomuted-mute-mute","dfnText":"mute","external":false,"refSections":[],"url":"#dom-controlledframe-setaudiomuted-mute-mute"},
"dom-controlledframe-setzoom": {"dfnID":"dom-controlledframe-setzoom","dfnText":"setZoom","external":false,"refSections":[],"url":"#dom-controlledframe-setzoom"},
"dom-controlledframe-setzoom-zoomfactor-zoomfactor": {"dfnID":"dom-controlledframe-setzoom-zoomfactor-zoomfactor","dfnText":"zoomFactor","external":false,"refSections":[],"url":"#dom-controlledframe-setzoom-zoomfactor-zoomfactor"},
"dom-controlledframe-src": {"dfnID":"dom-controlledframe-src","dfnText":"src","external":false,"refSections":[],"url":"#dom-controlledframe-src"},
"dom-controlledframe-stop": {"dfnID":"dom-controlledframe-stop","dfnText":"stop","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-controlledframe-stop"}],"title":"6.2. Navigation methods"}],"url":"#dom-controlledframe-stop"},
"dom-injectdetails-code": {"dfnID":"dom-injectdetails-code","dfnText":"code","external":false,"refSections":[],"url":"#dom-injectdetails-code"},
"dom-injectdetails-file": {"dfnID":"dom-injectdetails-file","dfnText":"file","external":false,"refSections":[],"url":"#dom-injectdetails-file"},
"dom-injectionitems-code": {"dfnID":"dom-injectionitems-code","dfnText":"code","external":false,"refSections":[],"url":"#dom-injectionitems-code"},
"dom-injectionitems-files": {"dfnID":"dom-injectionitems-files","dfnText":"files","external":false,"refSections":[],"url":"#dom-injectionitems-files"},
"dom-itemtype-checkbox": {"dfnID":"dom-itemtype-checkbox","dfnText":"\"checkbox\"","external":false,"refSections":[],"url":"#dom-itemtype-checkbox"},
"dom-itemtype-normal": {"dfnID":"dom-itemtype-normal","dfnText":"\"normal\"","external":false,"refSections":[],"url":"#dom-itemtype-normal"},
"dom-itemtype-radio": {"dfnID":"dom-itemtype-radio","dfnText":"\"radio\"","external":false,"refSections":[],"url":"#dom-itemtype-radio"},
"dom-itemtype-separator": {"dfnID":"dom-itemtype-separator","dfnText":"\"separator\"","external":false,"refSections":[],"url":"#dom-itemtype-separator"},
"dom-onclickdata-checked": {"dfnID":"dom-onclickdata-checked","dfnText":"checked","external":false,"refSections":[],"url":"#dom-onclickdata-checked"},
"dom-onclickdata-editable": {"dfnID":"dom-onclickdata-editable","dfnText":"editable","external":false,"refSections":[],"url":"#dom-onclickdata-editable"},
"dom-onclickdata-frameid": {"dfnID":"dom-onclickdata-frameid","dfnText":"frameId","external":false,"refSections":[],"url":"#dom-onclickdata-frameid"},
"dom-onclickdata-frameurl": {"dfnID":"dom-onclickdata-frameurl","dfnText":"frameUrl","external":false,"refSections":[],"url":"#dom-onclickdata-frameurl"},
"dom-onclickdata-linkurl": {"dfnID":"dom-onclickdata-linkurl","dfnText":"linkUrl","external":false,"refSections":[],"url":"#dom-onclickdata-linkurl"},
"dom-onclickdata-mediatype": {"dfnID":"dom-onclickdata-mediatype","dfnText":"mediaType","external":false,"refSections":[],"url":"#dom-onclickdata-mediatype"},
"dom-onclickdata-menuitemid": {"dfnID":"dom-onclickdata-menuitemid","dfnText":"menuItemId","external":false,"refSections":[],"url":"#dom-onclickdata-menuitemid"},
"dom-onclickdata-pageurl": {"dfnID":"dom-onclickdata-pageurl","dfnText":"pageUrl","external":false,"refSections":[],"url":"#dom-onclickdata-pageurl"},
"dom-onclickdata-parentmenuid": {"dfnID":"dom-onclickdata-parentmenuid","dfnText":"parentMenuId","external":false,"refSections":[],"url":"#dom-onclickdata-parentmenuid"},
"dom-onclickdata-selectiontext": {"dfnID":"dom-onclickdata-selectiontext","dfnText":"selectionText","external":false,"refSections":[],"url":"#dom-onclickdata-selectiontext"},
"dom-onclickdata-srcurl": {"dfnID":"dom-onclickdata-srcurl","dfnText":"srcUrl","external":false,"refSections":[],"url":"#dom-onclickdata-srcurl"},
"dom-onclickdata-waschecked": {"dfnID":"dom-onclickdata-waschecked","dfnText":"wasChecked","external":false,"refSections":[],"url":"#dom-onclickdata-waschecked"},
"dom-runat-document_end": {"dfnID":"dom-runat-document_end","dfnText":"\"document_end\"","external":false,"refSections":[],"url":"#dom-runat-document_end"},
"dom-runat-document_idle": {"dfnID":"dom-runat-document_idle","dfnText":"\"document_idle\"","external":false,"refSections":[],"url":"#dom-runat-document_idle"},
"dom-runat-document_start": {"dfnID":"dom-runat-document_start","dfnText":"\"document_start\"","external":false,"refSections":[],"url":"#dom-runat-document_start"},
"enumdef-contexttype": {"dfnID":"enumdef-contexttype","dfnText":"ContextType","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-contexttype"}],"title":"7. Controlled Frame API"}],"url":"#enumdef-contexttype"},
"enumdef-itemtype": {"dfnID":"enumdef-itemtype","dfnText":"ItemType","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-itemtype"}],"title":"7. Controlled Frame API"}],"url":"#enumdef-itemtype"},
"enumdef-runat": {"dfnID":"enumdef-runat","dfnText":"RunAt","external":false,"refSections":[{"refs":[{"id":"ref-for-enumdef-runat"}],"title":"6.3. Scripting methods"}],"url":"#enumdef-runat"},
"f8de33a3": {"dfnID":"f8de33a3","dfnText":"long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-long"},{"id":"ref-for-idl-long\u2460"},{"id":"ref-for-idl-long\u2461"}],"title":"6.1. Controlled Frame HTML Element"},{"refs":[{"id":"ref-for-idl-long\u2462"}],"title":"6.4. Configuration methods"},{"refs":[{"id":"ref-for-idl-long\u2463"},{"id":"ref-for-idl-long\u2464"},{"id":"ref-for-idl-long\u2465"},{"id":"ref-for-idl-long\u2466"},{"id":"ref-for-idl-long\u2467"},{"id":"ref-for-idl-long\u2468"}],"title":"7. Controlled Frame API"}],"url":"https://webidl.spec.whatwg.org/#idl-long"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#callbackdef-contextmenuscallback": {"displayText":"ContextMenusCallback","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ContextMenusCallback","type":"callback","url":"#callbackdef-contextmenuscallback"},
"#callbackdef-contextmenuseventlistener": {"displayText":"ContextMenusEventListener","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ContextMenusEventListener","type":"callback","url":"#callbackdef-contextmenuseventlistener"},
"#contextmenus": {"displayText":"ContextMenus","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ContextMenus","type":"interface","url":"#contextmenus"},
"#dictdef-cleardataoptions": {"displayText":"ClearDataOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ClearDataOptions","type":"dictionary","url":"#dictdef-cleardataoptions"},
"#dictdef-cleardatatypeset": {"displayText":"ClearDataTypeSet","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ClearDataTypeSet","type":"dictionary","url":"#dictdef-cleardatatypeset"},
"#dictdef-contentscriptdetails": {"displayText":"ContentScriptDetails","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ContentScriptDetails","type":"dictionary","url":"#dictdef-contentscriptdetails"},
"#dictdef-contextmenuscreateproperties": {"displayText":"ContextMenusCreateProperties","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ContextMenusCreateProperties","type":"dictionary","url":"#dictdef-contextmenuscreateproperties"},
"#dictdef-contextmenusproperties": {"displayText":"ContextMenusProperties","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ContextMenusProperties","type":"dictionary","url":"#dictdef-contextmenusproperties"},
"#dictdef-injectdetails": {"displayText":"InjectDetails","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"InjectDetails","type":"dictionary","url":"#dictdef-injectdetails"},
"#dictdef-injectionitems": {"displayText":"InjectionItems","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"InjectionItems","type":"dictionary","url":"#dictdef-injectionitems"},
"#dictdef-onclickdata": {"displayText":"OnClickData","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"OnClickData","type":"dictionary","url":"#dictdef-onclickdata"},
"#dom-controlledframe-back": {"displayText":"back()","export":true,"for_":["ControlledFrame"],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"back()","type":"method","url":"#dom-controlledframe-back"},
"#dom-controlledframe-cangoback": {"displayText":"canGoBack()","export":true,"for_":["ControlledFrame"],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"canGoBack()","type":"method","url":"#dom-controlledframe-cangoback"},
"#dom-controlledframe-forward": {"displayText":"forward()","export":true,"for_":["ControlledFrame"],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"forward()","type":"method","url":"#dom-controlledframe-forward"},
"#dom-controlledframe-go": {"displayText":"go(relativeIndex)","export":true,"for_":["ControlledFrame"],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"go(relativeIndex)","type":"method","url":"#dom-controlledframe-go"},
"#dom-controlledframe-reload": {"displayText":"reload()","export":true,"for_":["ControlledFrame"],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"reload()","type":"method","url":"#dom-controlledframe-reload"},
"#dom-controlledframe-stop": {"displayText":"stop()","export":true,"for_":["ControlledFrame"],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"stop()","type":"method","url":"#dom-controlledframe-stop"},
"#enumdef-contexttype": {"displayText":"ContextType","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ContextType","type":"enum","url":"#enumdef-contexttype"},
"#enumdef-itemtype": {"displayText":"ItemType","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"ItemType","type":"enum","url":"#enumdef-itemtype"},
"#enumdef-runat": {"displayText":"RunAt","export":true,"for_":[],"level":"1","normative":true,"shortname":"controlled-frame","spec":"controlled-frame-1","status":"local","text":"RunAt","type":"enum","url":"#enumdef-runat"},
"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions": {"displayText":"CEReactions","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"CEReactions","type":"extended-attribute","url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor": {"displayText":"HTMLConstructor","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLConstructor","type":"extended-attribute","url":"https://html.spec.whatwg.org/multipage/dom.html#htmlconstructor"},
"https://html.spec.whatwg.org/multipage/dom.html#htmlelement": {"displayText":"HTMLElement","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/dom.html#htmlelement"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element": {"displayText":"iframe","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"iframe","type":"element","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy": {"displayText":"WindowProxy","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"WindowProxy","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#windowproxy"},
"https://webidl.spec.whatwg.org/#Exposed": {"displayText":"Exposed","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#SecureContext": {"displayText":"SecureContext","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SecureContext","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SecureContext"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-USVString": {"displayText":"USVString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"USVString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"https://webidl.spec.whatwg.org/#idl-any": {"displayText":"any","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"any","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-any"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-long": {"displayText":"long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-long"},
"https://webidl.spec.whatwg.org/#idl-promise": {"displayText":"Promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"displayText":"sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"displayText":"undefined","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>